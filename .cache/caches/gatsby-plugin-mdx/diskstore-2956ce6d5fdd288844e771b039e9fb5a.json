{"expireTime":9007200917126764000,"key":"gatsby-plugin-mdx-entire-payload-4cf955020dc3d9fd11037f3125d033f4-","val":{"mdast":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":275,"offset":275},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":275,"offset":275},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"I gave a talk about the same topic in the Typescript Meetup of Berlin. This article and the talk cover the same content, so you pick any of them to learn about this topic!","position":{"start":{"line":4,"column":1,"offset":277},"end":{"line":4,"column":172,"offset":448},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":277},"end":{"line":4,"column":172,"offset":448},"indent":[]}},{"type":"jsx","value":"<div class=\"Image__Medium\">\n    <YouTube videoId=\"cn6i5Av-B8Q\" opts={{\"start\":\"1884\"}} />\n  <figcaption>Link to the talk</figcaption>\n</div>","position":{"start":{"line":6,"column":1,"offset":450},"end":{"line":9,"column":7,"offset":590},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Most of the people think that by using Typescript as their application language, they are \"covered\" from any emptiness error, like the classic ","position":{"start":{"line":11,"column":1,"offset":592},"end":{"line":11,"column":144,"offset":735},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"\"undefined is not a function\"","position":{"start":{"line":11,"column":145,"offset":736},"end":{"line":11,"column":174,"offset":765},"indent":[]}}],"position":{"start":{"line":11,"column":144,"offset":735},"end":{"line":11,"column":175,"offset":766},"indent":[]}},{"type":"text","value":" or my favorite ","position":{"start":{"line":11,"column":175,"offset":766},"end":{"line":11,"column":191,"offset":782},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"\"can't read property X of undefined\"","position":{"start":{"line":11,"column":192,"offset":783},"end":{"line":11,"column":228,"offset":819},"indent":[]}}],"position":{"start":{"line":11,"column":191,"offset":782},"end":{"line":11,"column":229,"offset":820},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":11,"column":229,"offset":820},"end":{"line":11,"column":230,"offset":821},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":592},"end":{"line":11,"column":230,"offset":821},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This assumption is wrong, and the best way to demonstrate it is with code!","position":{"start":{"line":13,"column":1,"offset":823},"end":{"line":13,"column":75,"offset":897},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":823},"end":{"line":13,"column":75,"offset":897},"indent":[]}},{"type":"heading","depth":1,"children":[{"type":"text","value":"Why will Typescript NOT always cover you? 🕵","position":{"start":{"line":15,"column":3,"offset":901},"end":{"line":15,"column":47,"offset":945},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":899},"end":{"line":15,"column":47,"offset":945},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following example does ","position":{"start":{"line":17,"column":1,"offset":947},"end":{"line":17,"column":28,"offset":974},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not","position":{"start":{"line":17,"column":30,"offset":976},"end":{"line":17,"column":33,"offset":979},"indent":[]}}],"position":{"start":{"line":17,"column":28,"offset":974},"end":{"line":17,"column":35,"offset":981},"indent":[]}},{"type":"text","value":" present any Typescript error.","position":{"start":{"line":17,"column":35,"offset":981},"end":{"line":17,"column":65,"offset":1011},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":947},"end":{"line":17,"column":65,"offset":1011},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"// Typescript definition\ntype ExampleType = {\n  name: string,\n  age?: number,\n  pets: {\n    name: string,\n    legs: number,\n  }[],\n};\n\n// communicates with external API\nconst fetchData = (): Promise<ExampleType> => {};\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n  return data.pets.find((pet) => pet.legs === 2); // Boom!\n};","position":{"start":{"line":19,"column":1,"offset":1013},"end":{"line":39,"column":4,"offset":1420},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The snippet contains:","position":{"start":{"line":41,"column":1,"offset":1422},"end":{"line":41,"column":22,"offset":1443},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1422},"end":{"line":41,"column":22,"offset":1443},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":43,"column":3,"offset":1447},"end":{"line":43,"column":16,"offset":1460},"indent":[]}},{"type":"text","value":": A type definition with two properties required ","position":{"start":{"line":43,"column":16,"offset":1460},"end":{"line":43,"column":65,"offset":1509},"indent":[]}},{"type":"inlineCode","value":"name","position":{"start":{"line":43,"column":65,"offset":1509},"end":{"line":43,"column":71,"offset":1515},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":43,"column":71,"offset":1515},"end":{"line":43,"column":76,"offset":1520},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":43,"column":76,"offset":1520},"end":{"line":43,"column":82,"offset":1526},"indent":[]}},{"type":"text","value":", and one optional ","position":{"start":{"line":43,"column":82,"offset":1526},"end":{"line":43,"column":101,"offset":1545},"indent":[]}},{"type":"inlineCode","value":"age","position":{"start":{"line":43,"column":101,"offset":1545},"end":{"line":43,"column":106,"offset":1550},"indent":[]}},{"type":"text","value":". The property ","position":{"start":{"line":43,"column":106,"offset":1550},"end":{"line":43,"column":121,"offset":1565},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":43,"column":121,"offset":1565},"end":{"line":43,"column":127,"offset":1571},"indent":[]}},{"type":"text","value":" is an array of objects with ","position":{"start":{"line":43,"column":127,"offset":1571},"end":{"line":43,"column":156,"offset":1600},"indent":[]}},{"type":"inlineCode","value":"name","position":{"start":{"line":43,"column":156,"offset":1600},"end":{"line":43,"column":162,"offset":1606},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":43,"column":162,"offset":1606},"end":{"line":43,"column":167,"offset":1611},"indent":[]}},{"type":"inlineCode","value":"legs","position":{"start":{"line":43,"column":167,"offset":1611},"end":{"line":43,"column":173,"offset":1617},"indent":[]}},{"type":"text","value":", both required.","position":{"start":{"line":43,"column":173,"offset":1617},"end":{"line":43,"column":189,"offset":1633},"indent":[]}}],"position":{"start":{"line":43,"column":3,"offset":1447},"end":{"line":43,"column":189,"offset":1633},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1445},"end":{"line":43,"column":189,"offset":1633},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"fetchData","position":{"start":{"line":44,"column":3,"offset":1636},"end":{"line":44,"column":14,"offset":1647},"indent":[]}},{"type":"text","value":": A function to retrieve data from an external endpoint.","position":{"start":{"line":44,"column":14,"offset":1647},"end":{"line":44,"column":70,"offset":1703},"indent":[]}}],"position":{"start":{"line":44,"column":3,"offset":1636},"end":{"line":44,"column":70,"offset":1703},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1634},"end":{"line":44,"column":70,"offset":1703},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"getBiped","position":{"start":{"line":45,"column":3,"offset":1706},"end":{"line":45,"column":13,"offset":1716},"indent":[]}},{"type":"text","value":": Another function that will call ","position":{"start":{"line":45,"column":13,"offset":1716},"end":{"line":45,"column":47,"offset":1750},"indent":[]}},{"type":"inlineCode","value":"fetchData","position":{"start":{"line":45,"column":47,"offset":1750},"end":{"line":45,"column":58,"offset":1761},"indent":[]}},{"type":"text","value":" and then iterate over the ","position":{"start":{"line":45,"column":58,"offset":1761},"end":{"line":45,"column":85,"offset":1788},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":45,"column":85,"offset":1788},"end":{"line":45,"column":91,"offset":1794},"indent":[]}},{"type":"text","value":", and return only the ","position":{"start":{"line":45,"column":91,"offset":1794},"end":{"line":45,"column":113,"offset":1816},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":45,"column":113,"offset":1816},"end":{"line":45,"column":119,"offset":1822},"indent":[]}},{"type":"text","value":" with two ","position":{"start":{"line":45,"column":119,"offset":1822},"end":{"line":45,"column":129,"offset":1832},"indent":[]}},{"type":"inlineCode","value":"legs","position":{"start":{"line":45,"column":129,"offset":1832},"end":{"line":45,"column":135,"offset":1838},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":45,"column":135,"offset":1838},"end":{"line":45,"column":136,"offset":1839},"indent":[]}}],"position":{"start":{"line":45,"column":3,"offset":1706},"end":{"line":45,"column":136,"offset":1839},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1704},"end":{"line":45,"column":136,"offset":1839},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1445},"end":{"line":45,"column":136,"offset":1839},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"So, why my script will fail when I execute it? The reason is, the external API is returning an object which doesn't contain ","position":{"start":{"line":47,"column":1,"offset":1841},"end":{"line":47,"column":125,"offset":1965},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":47,"column":125,"offset":1965},"end":{"line":47,"column":131,"offset":1971},"indent":[]}},{"type":"text","value":" inside, and then when you try to execute ","position":{"start":{"line":47,"column":131,"offset":1971},"end":{"line":47,"column":173,"offset":2013},"indent":[]}},{"type":"inlineCode","value":"data.pets.find()","position":{"start":{"line":47,"column":173,"offset":2013},"end":{"line":47,"column":191,"offset":2031},"indent":[]}},{"type":"text","value":", you will receive the error of ","position":{"start":{"line":47,"column":191,"offset":2031},"end":{"line":47,"column":223,"offset":2063},"indent":[]}},{"type":"inlineCode","value":"Uncaught ReferenceError: Cannot read property 'find' of undefined","position":{"start":{"line":47,"column":223,"offset":2063},"end":{"line":47,"column":290,"offset":2130},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":47,"column":290,"offset":2130},"end":{"line":47,"column":291,"offset":2131},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1841},"end":{"line":47,"column":291,"offset":2131},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Inside the ","position":{"start":{"line":49,"column":1,"offset":2133},"end":{"line":49,"column":12,"offset":2144},"indent":[]}},{"type":"link","title":null,"url":"https://reactjs.org/docs/static-type-checking.html","children":[{"type":"text","value":"React official Documentation","position":{"start":{"line":49,"column":13,"offset":2145},"end":{"line":49,"column":41,"offset":2173},"indent":[]}}],"position":{"start":{"line":49,"column":12,"offset":2144},"end":{"line":49,"column":94,"offset":2226},"indent":[]}},{"type":"text","value":" you can find a very nice definition of what Typescript is:","position":{"start":{"line":49,"column":94,"offset":2226},"end":{"line":49,"column":153,"offset":2285},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2133},"end":{"line":49,"column":153,"offset":2285},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"TypeScript is a programming language developed by Microsoft. It is a typed superset of JavaScript and includes its compiler. Being a typed language, TypeScript can catch errors and bugs at build time, long before your app goes live.","position":{"start":{"line":51,"column":3,"offset":2289},"end":{"line":51,"column":235,"offset":2521},"indent":[]}}],"position":{"start":{"line":51,"column":3,"offset":2289},"end":{"line":51,"column":235,"offset":2521},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2287},"end":{"line":51,"column":235,"offset":2521},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Given that definition, it's possible to formulate a new assumption:","position":{"start":{"line":53,"column":1,"offset":2523},"end":{"line":53,"column":68,"offset":2590},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":2523},"end":{"line":53,"column":68,"offset":2590},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Typescript performs static type validation. Developers should take of dynamic validations.","position":{"start":{"line":55,"column":3,"offset":2594},"end":{"line":55,"column":93,"offset":2684},"indent":[]}}],"position":{"start":{"line":55,"column":3,"offset":2594},"end":{"line":55,"column":93,"offset":2684},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":2592},"end":{"line":55,"column":93,"offset":2684},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So then: ","position":{"start":{"line":57,"column":1,"offset":2686},"end":{"line":57,"column":10,"offset":2695},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Do you need to validate everything? 🤔","position":{"start":{"line":57,"column":11,"offset":2696},"end":{"line":57,"column":49,"offset":2734},"indent":[]}}],"position":{"start":{"line":57,"column":10,"offset":2695},"end":{"line":57,"column":50,"offset":2735},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":2686},"end":{"line":57,"column":50,"offset":2735},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Simply, ","position":{"start":{"line":59,"column":1,"offset":2737},"end":{"line":59,"column":9,"offset":2745},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"No","position":{"start":{"line":59,"column":11,"offset":2747},"end":{"line":59,"column":13,"offset":2749},"indent":[]}}],"position":{"start":{"line":59,"column":9,"offset":2745},"end":{"line":59,"column":15,"offset":2751},"indent":[]}},{"type":"text","value":" 🎉","position":{"start":{"line":59,"column":15,"offset":2751},"end":{"line":59,"column":18,"offset":2754},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":2737},"end":{"line":59,"column":18,"offset":2754},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Checking all the variables of our application is time-consuming from a development and performance perspective. A nice rule of thumb you can follow is:","position":{"start":{"line":61,"column":1,"offset":2756},"end":{"line":61,"column":152,"offset":2907},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":2756},"end":{"line":61,"column":152,"offset":2907},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Validate all the ","position":{"start":{"line":63,"column":3,"offset":2911},"end":{"line":63,"column":20,"offset":2928},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"external","position":{"start":{"line":63,"column":22,"offset":2930},"end":{"line":63,"column":30,"offset":2938},"indent":[]}}],"position":{"start":{"line":63,"column":20,"offset":2928},"end":{"line":63,"column":32,"offset":2940},"indent":[]}},{"type":"text","value":" sources of your application.","position":{"start":{"line":63,"column":32,"offset":2940},"end":{"line":63,"column":61,"offset":2969},"indent":[]}}],"position":{"start":{"line":63,"column":3,"offset":2911},"end":{"line":63,"column":61,"offset":2969},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":2909},"end":{"line":63,"column":61,"offset":2969},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"External sources are everything that it's external or doesn't have access to your application. Some examples:","position":{"start":{"line":65,"column":1,"offset":2971},"end":{"line":65,"column":110,"offset":3080},"indent":[]}}],"position":{"start":{"line":65,"column":1,"offset":2971},"end":{"line":65,"column":110,"offset":3080},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"APIs responses","position":{"start":{"line":67,"column":3,"offset":3084},"end":{"line":67,"column":17,"offset":3098},"indent":[]}}],"position":{"start":{"line":67,"column":3,"offset":3084},"end":{"line":67,"column":17,"offset":3098},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3082},"end":{"line":67,"column":17,"offset":3098},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Content inside files","position":{"start":{"line":68,"column":3,"offset":3101},"end":{"line":68,"column":23,"offset":3121},"indent":[]}}],"position":{"start":{"line":68,"column":3,"offset":3101},"end":{"line":68,"column":23,"offset":3121},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":3099},"end":{"line":68,"column":23,"offset":3121},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Input from the user","position":{"start":{"line":69,"column":3,"offset":3124},"end":{"line":69,"column":22,"offset":3143},"indent":[]}}],"position":{"start":{"line":69,"column":3,"offset":3124},"end":{"line":69,"column":22,"offset":3143},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3122},"end":{"line":69,"column":22,"offset":3143},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Untyped Libraries","position":{"start":{"line":70,"column":3,"offset":3146},"end":{"line":70,"column":20,"offset":3163},"indent":[]}}],"position":{"start":{"line":70,"column":3,"offset":3146},"end":{"line":70,"column":20,"offset":3163},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3144},"end":{"line":70,"column":20,"offset":3163},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3082},"end":{"line":70,"column":20,"offset":3163},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"An application will always present at least one external source, otherwise, it will be very useless. Therefore, let's take a look at how you can write validations for your object in Typescript.","position":{"start":{"line":72,"column":1,"offset":3165},"end":{"line":72,"column":194,"offset":3358},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":3165},"end":{"line":72,"column":194,"offset":3358},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To keep things simple, the original snippet will be considered the ","position":{"start":{"line":74,"column":1,"offset":3360},"end":{"line":74,"column":68,"offset":3427},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"base","position":{"start":{"line":74,"column":69,"offset":3428},"end":{"line":74,"column":73,"offset":3432},"indent":[]}}],"position":{"start":{"line":74,"column":68,"offset":3427},"end":{"line":74,"column":74,"offset":3433},"indent":[]}},{"type":"text","value":" and on top, I will show how to implement each of the Validation Methods.","position":{"start":{"line":74,"column":74,"offset":3433},"end":{"line":74,"column":147,"offset":3506},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":3360},"end":{"line":74,"column":147,"offset":3506},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":76,"column":1,"offset":3508},"end":{"line":76,"column":4,"offset":3511},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Manual Validation 👷‍♂️","position":{"start":{"line":78,"column":4,"offset":3516},"end":{"line":78,"column":27,"offset":3539},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":3513},"end":{"line":78,"column":27,"offset":3539},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Most basic validation, it's a set of conditions that check if the structure is the expected one.","position":{"start":{"line":80,"column":1,"offset":3541},"end":{"line":80,"column":97,"offset":3637},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":3541},"end":{"line":80,"column":97,"offset":3637},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"const validate = (data: ExampleType) => {\n  if (!data.pets) return false;\n  // perform more checks\n\n  return true;\n};\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n\n  if (!validate(data))\n    throw Error('Validation error: data is not complete ...');\n\n  return data.pets.find((pet) => pet.legs === 2);\n};","position":{"start":{"line":82,"column":1,"offset":3639},"end":{"line":100,"column":4,"offset":4024},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"As you can see a new function has been defined, called ","position":{"start":{"line":102,"column":1,"offset":4026},"end":{"line":102,"column":56,"offset":4081},"indent":[]}},{"type":"inlineCode","value":"validate","position":{"start":{"line":102,"column":56,"offset":4081},"end":{"line":102,"column":66,"offset":4091},"indent":[]}},{"type":"text","value":", which receives as a parameter an ","position":{"start":{"line":102,"column":66,"offset":4091},"end":{"line":102,"column":101,"offset":4126},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":102,"column":101,"offset":4126},"end":{"line":102,"column":114,"offset":4139},"indent":[]}},{"type":"text","value":" object, with which is going to check if the property ","position":{"start":{"line":102,"column":114,"offset":4139},"end":{"line":102,"column":168,"offset":4193},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":102,"column":168,"offset":4193},"end":{"line":102,"column":174,"offset":4199},"indent":[]}},{"type":"text","value":" is defined or not. In case not, it will return ","position":{"start":{"line":102,"column":174,"offset":4199},"end":{"line":102,"column":222,"offset":4247},"indent":[]}},{"type":"inlineCode","value":"false","position":{"start":{"line":102,"column":222,"offset":4247},"end":{"line":102,"column":229,"offset":4254},"indent":[]}},{"type":"text","value":", which will end up throwing an Error with a description message. Otherwise, it will continue the execution and now when evaluating ","position":{"start":{"line":102,"column":229,"offset":4254},"end":{"line":102,"column":361,"offset":4386},"indent":[]}},{"type":"inlineCode","value":"data.pets.find","position":{"start":{"line":102,"column":361,"offset":4386},"end":{"line":102,"column":377,"offset":4402},"indent":[]}},{"type":"text","value":", it won't throw an error.","position":{"start":{"line":102,"column":377,"offset":4402},"end":{"line":102,"column":403,"offset":4428},"indent":[]}}],"position":{"start":{"line":102,"column":1,"offset":4026},"end":{"line":102,"column":403,"offset":4428},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Be aware that the implementation that the ","position":{"start":{"line":104,"column":1,"offset":4430},"end":{"line":104,"column":43,"offset":4472},"indent":[]}},{"type":"inlineCode","value":"validate","position":{"start":{"line":104,"column":43,"offset":4472},"end":{"line":104,"column":53,"offset":4482},"indent":[]}},{"type":"text","value":" function is quite simple, and there is room for many more checks, such as:","position":{"start":{"line":104,"column":53,"offset":4482},"end":{"line":104,"column":128,"offset":4557},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":4430},"end":{"line":104,"column":128,"offset":4557},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"name","position":{"start":{"line":106,"column":3,"offset":4561},"end":{"line":106,"column":9,"offset":4567},"indent":[]}},{"type":"text","value":" should exist","position":{"start":{"line":106,"column":9,"offset":4567},"end":{"line":106,"column":22,"offset":4580},"indent":[]}}],"position":{"start":{"line":106,"column":3,"offset":4561},"end":{"line":106,"column":22,"offset":4580},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":4559},"end":{"line":106,"column":22,"offset":4580},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"name","position":{"start":{"line":107,"column":3,"offset":4583},"end":{"line":107,"column":9,"offset":4589},"indent":[]}},{"type":"text","value":" should be a ","position":{"start":{"line":107,"column":9,"offset":4589},"end":{"line":107,"column":22,"offset":4602},"indent":[]}},{"type":"inlineCode","value":"string","position":{"start":{"line":107,"column":22,"offset":4602},"end":{"line":107,"column":30,"offset":4610},"indent":[]}}],"position":{"start":{"line":107,"column":3,"offset":4583},"end":{"line":107,"column":30,"offset":4610},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":4581},"end":{"line":107,"column":30,"offset":4610},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"if ","position":{"start":{"line":108,"column":3,"offset":4613},"end":{"line":108,"column":6,"offset":4616},"indent":[]}},{"type":"inlineCode","value":"age","position":{"start":{"line":108,"column":6,"offset":4616},"end":{"line":108,"column":11,"offset":4621},"indent":[]}},{"type":"text","value":" exists, it should be a ","position":{"start":{"line":108,"column":11,"offset":4621},"end":{"line":108,"column":35,"offset":4645},"indent":[]}},{"type":"inlineCode","value":"number","position":{"start":{"line":108,"column":35,"offset":4645},"end":{"line":108,"column":43,"offset":4653},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":108,"column":43,"offset":4653},"end":{"line":108,"column":44,"offset":4654},"indent":[]}}],"position":{"start":{"line":108,"column":3,"offset":4613},"end":{"line":108,"column":44,"offset":4654},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":4611},"end":{"line":108,"column":44,"offset":4654},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"pets","position":{"start":{"line":109,"column":3,"offset":4657},"end":{"line":109,"column":9,"offset":4663},"indent":[]}},{"type":"text","value":" should be an ","position":{"start":{"line":109,"column":9,"offset":4663},"end":{"line":109,"column":23,"offset":4677},"indent":[]}},{"type":"inlineCode","value":"array","position":{"start":{"line":109,"column":23,"offset":4677},"end":{"line":109,"column":30,"offset":4684},"indent":[]}},{"type":"text","value":" of ","position":{"start":{"line":109,"column":30,"offset":4684},"end":{"line":109,"column":34,"offset":4688},"indent":[]}},{"type":"inlineCode","value":"object","position":{"start":{"line":109,"column":34,"offset":4688},"end":{"line":109,"column":42,"offset":4696},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":109,"column":42,"offset":4696},"end":{"line":109,"column":43,"offset":4697},"indent":[]}}],"position":{"start":{"line":109,"column":3,"offset":4657},"end":{"line":109,"column":43,"offset":4697},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":4655},"end":{"line":109,"column":43,"offset":4697},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"each ","position":{"start":{"line":110,"column":3,"offset":4700},"end":{"line":110,"column":8,"offset":4705},"indent":[]}},{"type":"inlineCode","value":"pet","position":{"start":{"line":110,"column":8,"offset":4705},"end":{"line":110,"column":13,"offset":4710},"indent":[]}},{"type":"text","value":" Object should have a property ","position":{"start":{"line":110,"column":13,"offset":4710},"end":{"line":110,"column":44,"offset":4741},"indent":[]}},{"type":"inlineCode","value":"name","position":{"start":{"line":110,"column":44,"offset":4741},"end":{"line":110,"column":50,"offset":4747},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":110,"column":50,"offset":4747},"end":{"line":110,"column":55,"offset":4752},"indent":[]}},{"type":"inlineCode","value":"legs","position":{"start":{"line":110,"column":55,"offset":4752},"end":{"line":110,"column":61,"offset":4758},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":110,"column":61,"offset":4758},"end":{"line":110,"column":62,"offset":4759},"indent":[]}}],"position":{"start":{"line":110,"column":3,"offset":4700},"end":{"line":110,"column":62,"offset":4759},"indent":[]}}],"position":{"start":{"line":110,"column":1,"offset":4698},"end":{"line":110,"column":62,"offset":4759},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":4559},"end":{"line":110,"column":62,"offset":4759},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The more checks you add, the more robust your application will be, but the more time you need to invest too.","position":{"start":{"line":112,"column":1,"offset":4761},"end":{"line":112,"column":109,"offset":4869},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":4761},"end":{"line":112,"column":109,"offset":4869},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The advantages of this method are:","position":{"start":{"line":114,"column":1,"offset":4871},"end":{"line":114,"column":35,"offset":4905},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":4871},"end":{"line":114,"column":35,"offset":4905},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"No external library required","position":{"start":{"line":116,"column":5,"offset":4911},"end":{"line":116,"column":33,"offset":4939},"indent":[]}}],"position":{"start":{"line":116,"column":3,"offset":4909},"end":{"line":116,"column":35,"offset":4941},"indent":[]}},{"type":"text","value":": only pure Typescript.","position":{"start":{"line":116,"column":35,"offset":4941},"end":{"line":116,"column":58,"offset":4964},"indent":[]}}],"position":{"start":{"line":116,"column":3,"offset":4909},"end":{"line":116,"column":58,"offset":4964},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":4907},"end":{"line":116,"column":58,"offset":4964},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Business-centric","position":{"start":{"line":117,"column":5,"offset":4969},"end":{"line":117,"column":21,"offset":4985},"indent":[]}}],"position":{"start":{"line":117,"column":3,"offset":4967},"end":{"line":117,"column":23,"offset":4987},"indent":[]}},{"type":"text","value":": you can add any business logic inside these validators, for example, you can check that ","position":{"start":{"line":117,"column":23,"offset":4987},"end":{"line":117,"column":113,"offset":5077},"indent":[]}},{"type":"inlineCode","value":"propertyA","position":{"start":{"line":117,"column":113,"offset":5077},"end":{"line":117,"column":124,"offset":5088},"indent":[]}},{"type":"text","value":" shouldn't exist if ","position":{"start":{"line":117,"column":124,"offset":5088},"end":{"line":117,"column":144,"offset":5108},"indent":[]}},{"type":"inlineCode","value":"propertyB","position":{"start":{"line":117,"column":144,"offset":5108},"end":{"line":117,"column":155,"offset":5119},"indent":[]}},{"type":"text","value":" is present.","position":{"start":{"line":117,"column":155,"offset":5119},"end":{"line":117,"column":167,"offset":5131},"indent":[]}}],"position":{"start":{"line":117,"column":3,"offset":4967},"end":{"line":117,"column":167,"offset":5131},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":4965},"end":{"line":117,"column":167,"offset":5131},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":4907},"end":{"line":117,"column":167,"offset":5131},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"It also presents some disadvantages:","position":{"start":{"line":119,"column":1,"offset":5133},"end":{"line":119,"column":37,"offset":5169},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":5133},"end":{"line":119,"column":37,"offset":5169},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Manual work","position":{"start":{"line":121,"column":5,"offset":5175},"end":{"line":121,"column":16,"offset":5186},"indent":[]}}],"position":{"start":{"line":121,"column":3,"offset":5173},"end":{"line":121,"column":18,"offset":5188},"indent":[]}},{"type":"text","value":": every validation has to be manually coded and this can be quite time-consuming.","position":{"start":{"line":121,"column":18,"offset":5188},"end":{"line":121,"column":99,"offset":5269},"indent":[]}}],"position":{"start":{"line":121,"column":3,"offset":5173},"end":{"line":121,"column":99,"offset":5269},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":5171},"end":{"line":121,"column":99,"offset":5269},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Duplication of code","position":{"start":{"line":122,"column":5,"offset":5274},"end":{"line":122,"column":24,"offset":5293},"indent":[]}}],"position":{"start":{"line":122,"column":3,"offset":5272},"end":{"line":122,"column":26,"offset":5295},"indent":[]}},{"type":"text","value":": in the example, ","position":{"start":{"line":122,"column":26,"offset":5295},"end":{"line":122,"column":44,"offset":5313},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":122,"column":44,"offset":5313},"end":{"line":122,"column":57,"offset":5326},"indent":[]}},{"type":"text","value":" already defines that there is a ","position":{"start":{"line":122,"column":57,"offset":5326},"end":{"line":122,"column":90,"offset":5359},"indent":[]}},{"type":"inlineCode","value":"pets","position":{"start":{"line":122,"column":90,"offset":5359},"end":{"line":122,"column":96,"offset":5365},"indent":[]}},{"type":"text","value":" property and that it is required, but again inside the validation code you should still check that it's true.","position":{"start":{"line":122,"column":96,"offset":5365},"end":{"line":122,"column":206,"offset":5475},"indent":[]}}],"position":{"start":{"line":122,"column":3,"offset":5272},"end":{"line":122,"column":206,"offset":5475},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":5270},"end":{"line":122,"column":206,"offset":5475},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Room for bugs","position":{"start":{"line":123,"column":5,"offset":5480},"end":{"line":123,"column":18,"offset":5493},"indent":[]}}],"position":{"start":{"line":123,"column":3,"offset":5478},"end":{"line":123,"column":20,"offset":5495},"indent":[]}},{"type":"text","value":": in the previous code, there were many \"bugs\" or places for improvement.","position":{"start":{"line":123,"column":20,"offset":5495},"end":{"line":123,"column":93,"offset":5568},"indent":[]}}],"position":{"start":{"line":123,"column":3,"offset":5478},"end":{"line":123,"column":93,"offset":5568},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":5476},"end":{"line":123,"column":93,"offset":5568},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":5171},"end":{"line":123,"column":93,"offset":5568},"indent":[1,1]}},{"type":"thematicBreak","position":{"start":{"line":125,"column":1,"offset":5570},"end":{"line":125,"column":4,"offset":5573},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Using a Validation Library ✨","position":{"start":{"line":127,"column":4,"offset":5578},"end":{"line":127,"column":32,"offset":5606},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":5575},"end":{"line":127,"column":32,"offset":5606},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Why re-inventing the wheel, right? This method consists of using any validation library to assert the structure of the objects. To name some of the most used libraries:","position":{"start":{"line":129,"column":1,"offset":5608},"end":{"line":129,"column":169,"offset":5776},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":5608},"end":{"line":129,"column":169,"offset":5776},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/ajv-validator/ajv","children":[{"type":"inlineCode","value":"ajv","position":{"start":{"line":131,"column":4,"offset":5781},"end":{"line":131,"column":9,"offset":5786},"indent":[]}}],"position":{"start":{"line":131,"column":3,"offset":5780},"end":{"line":131,"column":48,"offset":5825},"indent":[]}}],"position":{"start":{"line":131,"column":3,"offset":5780},"end":{"line":131,"column":48,"offset":5825},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":5778},"end":{"line":131,"column":48,"offset":5825},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/hapijs/joi","children":[{"type":"inlineCode","value":"joi","position":{"start":{"line":132,"column":4,"offset":5829},"end":{"line":132,"column":9,"offset":5834},"indent":[]}}],"position":{"start":{"line":132,"column":3,"offset":5828},"end":{"line":132,"column":41,"offset":5866},"indent":[]}}],"position":{"start":{"line":132,"column":3,"offset":5828},"end":{"line":132,"column":41,"offset":5866},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":5826},"end":{"line":132,"column":41,"offset":5866},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/imbrn/v8n","children":[{"type":"inlineCode","value":"v8n","position":{"start":{"line":133,"column":4,"offset":5870},"end":{"line":133,"column":9,"offset":5875},"indent":[]}}],"position":{"start":{"line":133,"column":3,"offset":5869},"end":{"line":133,"column":40,"offset":5906},"indent":[]}}],"position":{"start":{"line":133,"column":3,"offset":5869},"end":{"line":133,"column":40,"offset":5906},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":5867},"end":{"line":133,"column":40,"offset":5906},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/ansman/validate.js","children":[{"type":"inlineCode","value":"validate.js","position":{"start":{"line":134,"column":4,"offset":5910},"end":{"line":134,"column":17,"offset":5923},"indent":[]}}],"position":{"start":{"line":134,"column":3,"offset":5909},"end":{"line":134,"column":57,"offset":5963},"indent":[]}}],"position":{"start":{"line":134,"column":3,"offset":5909},"end":{"line":134,"column":57,"offset":5963},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":5907},"end":{"line":134,"column":57,"offset":5963},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":5778},"end":{"line":134,"column":57,"offset":5963},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The validation library used for this article is ","position":{"start":{"line":136,"column":1,"offset":5965},"end":{"line":136,"column":49,"offset":6013},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":136,"column":49,"offset":6013},"end":{"line":136,"column":54,"offset":6018},"indent":[]}},{"type":"text","value":", nevertheless, all the conclusions also apply to the other libraries.","position":{"start":{"line":136,"column":54,"offset":6018},"end":{"line":136,"column":124,"offset":6088},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":5965},"end":{"line":136,"column":124,"offset":6088},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"const Ajv = require('ajv');\nconst ajv = new Ajv();\n\nconst validate = ajv.compile({\n  properties: {\n    name: {\n      type: 'string',\n      minLength: 3,\n    },\n    age: { type: 'number' },\n    pets: {\n      type: 'array',\n      items: {\n        name: {\n          type: 'string',\n          minLength: 3,\n        },\n        legs: { type: 'number' },\n      },\n    },\n  },\n  required: ['name', 'pets'],\n  type: 'object',\n});\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n  if (!validate(data)) {\n    throw Error('Validation failed: ' + ajv.errorsText(validate.errors));\n    // Error: Validation failed: data should have required property 'pets'\n  }\n\n  return data.pets.find((pet) => pet.legs === 2);\n};","position":{"start":{"line":138,"column":1,"offset":6090},"end":{"line":175,"column":4,"offset":6869},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Many validation libraries force you to define a ","position":{"start":{"line":177,"column":1,"offset":6871},"end":{"line":177,"column":49,"offset":6919},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":177,"column":49,"offset":6919},"end":{"line":177,"column":57,"offset":6927},"indent":[]}},{"type":"text","value":" where you can describe the structure to evaluate. Given that schema, you can create the validation function which is going to be used in your code.","position":{"start":{"line":177,"column":57,"offset":6927},"end":{"line":177,"column":205,"offset":7075},"indent":[]}}],"position":{"start":{"line":177,"column":1,"offset":6871},"end":{"line":177,"column":205,"offset":7075},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The declaration of your schema will always depend on the library you are using, therefore I always recommend checking the official docs. For the case of ","position":{"start":{"line":179,"column":1,"offset":7077},"end":{"line":179,"column":154,"offset":7230},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":179,"column":154,"offset":7230},"end":{"line":179,"column":159,"offset":7235},"indent":[]}},{"type":"text","value":", it enforces you to declare in an Object Style, where each property has to provide the ","position":{"start":{"line":179,"column":159,"offset":7235},"end":{"line":179,"column":247,"offset":7323},"indent":[]}},{"type":"inlineCode","value":"type","position":{"start":{"line":179,"column":247,"offset":7323},"end":{"line":179,"column":253,"offset":7329},"indent":[]}},{"type":"text","value":" of it and, also, it's possible to set custom checker for these values, like ","position":{"start":{"line":179,"column":253,"offset":7329},"end":{"line":179,"column":330,"offset":7406},"indent":[]}},{"type":"inlineCode","value":"minLength","position":{"start":{"line":179,"column":330,"offset":7406},"end":{"line":179,"column":341,"offset":7417},"indent":[]}},{"type":"text","value":" for any ","position":{"start":{"line":179,"column":341,"offset":7417},"end":{"line":179,"column":350,"offset":7426},"indent":[]}},{"type":"inlineCode","value":"array","position":{"start":{"line":179,"column":350,"offset":7426},"end":{"line":179,"column":357,"offset":7433},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":179,"column":357,"offset":7433},"end":{"line":179,"column":361,"offset":7437},"indent":[]}},{"type":"inlineCode","value":"string","position":{"start":{"line":179,"column":361,"offset":7437},"end":{"line":179,"column":369,"offset":7445},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":179,"column":369,"offset":7445},"end":{"line":179,"column":370,"offset":7446},"indent":[]}}],"position":{"start":{"line":179,"column":1,"offset":7077},"end":{"line":179,"column":370,"offset":7446},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This method provides:","position":{"start":{"line":181,"column":1,"offset":7448},"end":{"line":181,"column":22,"offset":7469},"indent":[]}}],"position":{"start":{"line":181,"column":1,"offset":7448},"end":{"line":181,"column":22,"offset":7469},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"A standardized way to create validators and checks","position":{"start":{"line":183,"column":5,"offset":7475},"end":{"line":183,"column":55,"offset":7525},"indent":[]}}],"position":{"start":{"line":183,"column":3,"offset":7473},"end":{"line":183,"column":57,"offset":7527},"indent":[]}},{"type":"text","value":": the idea behind the ","position":{"start":{"line":183,"column":57,"offset":7527},"end":{"line":183,"column":79,"offset":7549},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":183,"column":79,"offset":7549},"end":{"line":183,"column":87,"offset":7557},"indent":[]}},{"type":"text","value":" is to have only ","position":{"start":{"line":183,"column":87,"offset":7557},"end":{"line":183,"column":104,"offset":7574},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"one","position":{"start":{"line":183,"column":106,"offset":7576},"end":{"line":183,"column":109,"offset":7579},"indent":[]}}],"position":{"start":{"line":183,"column":104,"offset":7574},"end":{"line":183,"column":111,"offset":7581},"indent":[]}},{"type":"text","value":" way to check for specific conditions inside your application. Especially in JavaScript where there are many ways to accomplish the same task, such as checking the ","position":{"start":{"line":183,"column":111,"offset":7581},"end":{"line":183,"column":275,"offset":7745},"indent":[]}},{"type":"inlineCode","value":"length","position":{"start":{"line":183,"column":275,"offset":7745},"end":{"line":183,"column":283,"offset":7753},"indent":[]}},{"type":"text","value":" of an array. This quality is great to improve communication and collaboration inside a team.","position":{"start":{"line":183,"column":283,"offset":7753},"end":{"line":183,"column":376,"offset":7846},"indent":[]}}],"position":{"start":{"line":183,"column":3,"offset":7473},"end":{"line":183,"column":376,"offset":7846},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":7471},"end":{"line":183,"column":376,"offset":7846},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Improvement of Error Reporting","position":{"start":{"line":184,"column":5,"offset":7851},"end":{"line":184,"column":35,"offset":7881},"indent":[]}}],"position":{"start":{"line":184,"column":3,"offset":7849},"end":{"line":184,"column":37,"offset":7883},"indent":[]}},{"type":"text","value":": in case there is a mismatch on some property the library will inform you which one is the property in a human-friendly way, rather than just printing the Stack Trace.","position":{"start":{"line":184,"column":37,"offset":7883},"end":{"line":184,"column":205,"offset":8051},"indent":[]}}],"position":{"start":{"line":184,"column":3,"offset":7849},"end":{"line":184,"column":205,"offset":8051},"indent":[]}}],"position":{"start":{"line":184,"column":1,"offset":7847},"end":{"line":184,"column":205,"offset":8051},"indent":[]}}],"position":{"start":{"line":183,"column":1,"offset":7471},"end":{"line":184,"column":205,"offset":8051},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"This new way of creating validations present the following drawbacks:","position":{"start":{"line":186,"column":1,"offset":8053},"end":{"line":186,"column":70,"offset":8122},"indent":[]}}],"position":{"start":{"line":186,"column":1,"offset":8053},"end":{"line":186,"column":70,"offset":8122},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Introduction of new Syntax","position":{"start":{"line":188,"column":5,"offset":8128},"end":{"line":188,"column":31,"offset":8154},"indent":[]}}],"position":{"start":{"line":188,"column":3,"offset":8126},"end":{"line":188,"column":33,"offset":8156},"indent":[]}},{"type":"text","value":": when a team decides to add a new library, the difficulty degree to understand the whole codebase grows too. Every contributor has to know about the validator schema to understand how to make a change on it.","position":{"start":{"line":188,"column":33,"offset":8156},"end":{"line":188,"column":241,"offset":8364},"indent":[]}}],"position":{"start":{"line":188,"column":3,"offset":8126},"end":{"line":188,"column":241,"offset":8364},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":8124},"end":{"line":188,"column":241,"offset":8364},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Validators and Types are not in Sync","position":{"start":{"line":189,"column":5,"offset":8369},"end":{"line":189,"column":41,"offset":8405},"indent":[]}}],"position":{"start":{"line":189,"column":3,"offset":8367},"end":{"line":189,"column":43,"offset":8407},"indent":[]}},{"type":"text","value":": the definition of the ","position":{"start":{"line":189,"column":43,"offset":8407},"end":{"line":189,"column":67,"offset":8431},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":189,"column":67,"offset":8431},"end":{"line":189,"column":75,"offset":8439},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":189,"column":75,"offset":8439},"end":{"line":189,"column":80,"offset":8444},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":189,"column":80,"offset":8444},"end":{"line":189,"column":93,"offset":8457},"indent":[]}},{"type":"text","value":" are disconnected, which means that every time you make a change inside the ","position":{"start":{"line":189,"column":93,"offset":8457},"end":{"line":189,"column":169,"offset":8533},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":189,"column":169,"offset":8533},"end":{"line":189,"column":182,"offset":8546},"indent":[]}},{"type":"text","value":", you have to manually reflect it inside the ","position":{"start":{"line":189,"column":182,"offset":8546},"end":{"line":189,"column":227,"offset":8591},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":189,"column":227,"offset":8591},"end":{"line":189,"column":235,"offset":8599},"indent":[]}},{"type":"text","value":". Depending on how many validators, you have this task can be quite tedious.","position":{"start":{"line":189,"column":235,"offset":8599},"end":{"line":189,"column":311,"offset":8675},"indent":[]}}],"position":{"start":{"line":189,"column":3,"offset":8367},"end":{"line":189,"column":311,"offset":8675},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":8365},"end":{"line":189,"column":311,"offset":8675},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":8124},"end":{"line":189,"column":311,"offset":8675},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"One small comment regarding keeping in Sync Validators and Types, some open-source projects address this issue, such as ","position":{"start":{"line":191,"column":1,"offset":8677},"end":{"line":191,"column":121,"offset":8797},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/json-schema-to-typescript","children":[{"type":"text","value":"json-schema-to-typescript","position":{"start":{"line":191,"column":122,"offset":8798},"end":{"line":191,"column":147,"offset":8823},"indent":[]}}],"position":{"start":{"line":191,"column":121,"offset":8797},"end":{"line":191,"column":205,"offset":8881},"indent":[]}},{"type":"text","value":", which can generate a Type definition from an existing Schema. Then this won't be considered a problem.","position":{"start":{"line":191,"column":205,"offset":8881},"end":{"line":191,"column":309,"offset":8985},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":8677},"end":{"line":191,"column":309,"offset":8985},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":193,"column":1,"offset":8987},"end":{"line":193,"column":4,"offset":8990},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Dynamic Types Validator 🔌","position":{"start":{"line":195,"column":4,"offset":8995},"end":{"line":195,"column":30,"offset":9021},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":8992},"end":{"line":195,"column":30,"offset":9021},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is the method I want to talk about, and it presents a change of paradigm regarding how to create Validators and keep Types in sync.","position":{"start":{"line":197,"column":1,"offset":9023},"end":{"line":197,"column":137,"offset":9159},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":9023},"end":{"line":197,"column":137,"offset":9159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the two other methods, the Validator and the Type can be seen as different entities. The Validator will take the incoming Object and check its properties, and the Type statically belongs to the Object. Combining both entities, the result is a ","position":{"start":{"line":199,"column":1,"offset":9161},"end":{"line":199,"column":247,"offset":9407},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Validated Types Object","position":{"start":{"line":199,"column":249,"offset":9409},"end":{"line":199,"column":271,"offset":9431},"indent":[]}}],"position":{"start":{"line":199,"column":247,"offset":9407},"end":{"line":199,"column":273,"offset":9433},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":199,"column":273,"offset":9433},"end":{"line":199,"column":274,"offset":9434},"indent":[]}}],"position":{"start":{"line":199,"column":1,"offset":9161},"end":{"line":199,"column":274,"offset":9434},"indent":[]}},{"type":"jsx","value":"<div class=\"Image__Small\">\n  <img src=\"./images/before.svg\" alt=\"Before\" />\n  <figcaption>Before</figcaption>\n</div>","position":{"start":{"line":201,"column":1,"offset":9436},"end":{"line":204,"column":7,"offset":9552},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The method of Dynamic Types Validator allows a Type to generate a validator from his definition. Now they have are related, where a Validator depends entirely on a Type, preventing any mismatch between structures.","position":{"start":{"line":206,"column":1,"offset":9554},"end":{"line":206,"column":214,"offset":9767},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":9554},"end":{"line":206,"column":214,"offset":9767},"indent":[]}},{"type":"jsx","value":"<div class=\"Image__Small\">\n  <img src=\"./images/now.svg\" alt=\"Now\" />\n  <figcaption>Now</figcaption>\n</div>","position":{"start":{"line":208,"column":1,"offset":9769},"end":{"line":211,"column":7,"offset":9876},"indent":[1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":213,"column":1,"offset":9878},"end":{"line":213,"column":4,"offset":9881},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Generation of Validators 🤖","position":{"start":{"line":215,"column":5,"offset":9887},"end":{"line":215,"column":32,"offset":9914},"indent":[]}}],"position":{"start":{"line":215,"column":1,"offset":9883},"end":{"line":215,"column":32,"offset":9914},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To generate these Validators, I found an amazing Open Source project called ","position":{"start":{"line":217,"column":1,"offset":9916},"end":{"line":217,"column":77,"offset":9992},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/ForbesLindesay/typescript-json-validator","children":[{"type":"inlineCode","value":"typescript-json-validator","position":{"start":{"line":217,"column":78,"offset":9993},"end":{"line":217,"column":105,"offset":10020},"indent":[]}}],"position":{"start":{"line":217,"column":77,"offset":9992},"end":{"line":217,"column":167,"offset":10082},"indent":[]}},{"type":"text","value":", made by ","position":{"start":{"line":217,"column":167,"offset":10082},"end":{"line":217,"column":177,"offset":10092},"indent":[]}},{"type":"link","title":null,"url":"https://twitter.com/ForbesLindesay","children":[{"type":"text","value":"@ForbesLindesay","position":{"start":{"line":217,"column":178,"offset":10093},"end":{"line":217,"column":193,"offset":10108},"indent":[]}}],"position":{"start":{"line":217,"column":177,"offset":10092},"end":{"line":217,"column":230,"offset":10145},"indent":[]}},{"type":"text","value":". The description of the repository is:","position":{"start":{"line":217,"column":230,"offset":10145},"end":{"line":217,"column":269,"offset":10184},"indent":[]}}],"position":{"start":{"line":217,"column":1,"offset":9916},"end":{"line":217,"column":269,"offset":10184},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Automatically generate a validator using JSON Schema and AJV for any TypeScript type.","position":{"start":{"line":219,"column":3,"offset":10188},"end":{"line":219,"column":88,"offset":10273},"indent":[]}}],"position":{"start":{"line":219,"column":3,"offset":10188},"end":{"line":219,"column":88,"offset":10273},"indent":[]}}],"position":{"start":{"line":219,"column":1,"offset":10186},"end":{"line":219,"column":88,"offset":10273},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For the test, lets re-use the ","position":{"start":{"line":221,"column":1,"offset":10275},"end":{"line":221,"column":31,"offset":10305},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":221,"column":31,"offset":10305},"end":{"line":221,"column":44,"offset":10318},"indent":[]}},{"type":"text","value":" definition, which now has been moved to a separate file inside the ","position":{"start":{"line":221,"column":44,"offset":10318},"end":{"line":221,"column":112,"offset":10386},"indent":[]}},{"type":"inlineCode","value":"types","position":{"start":{"line":221,"column":112,"offset":10386},"end":{"line":221,"column":119,"offset":10393},"indent":[]}},{"type":"text","value":" folder.","position":{"start":{"line":221,"column":119,"offset":10393},"end":{"line":221,"column":127,"offset":10401},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":10275},"end":{"line":221,"column":127,"offset":10401},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"// src/types/ExampleType.ts\n\ntype ExampleType = {\n  name: string;\n  age?: number;\n  pets: {\n    name: string;\n    legs: number;\n  }[];\n};","position":{"start":{"line":223,"column":1,"offset":10403},"end":{"line":234,"column":4,"offset":10558},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This library exposes a handy CLI that can be called from anywhere, and given a file path and the name of the Type, it will generate in the same location as the file a new file with the Validator code.","position":{"start":{"line":236,"column":1,"offset":10560},"end":{"line":236,"column":201,"offset":10760},"indent":[]}}],"position":{"start":{"line":236,"column":1,"offset":10560},"end":{"line":236,"column":201,"offset":10760},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"> npx typescript-json-validator src/types/ExampleType.ts ExampleType\n# ExampleType.validator.ts created!","position":{"start":{"line":238,"column":1,"offset":10762},"end":{"line":241,"column":4,"offset":10878},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The resulting validator can be a very long file, so let's take a look piece by piece:","position":{"start":{"line":243,"column":1,"offset":10880},"end":{"line":243,"column":86,"offset":10965},"indent":[]}}],"position":{"start":{"line":243,"column":1,"offset":10880},"end":{"line":243,"column":86,"offset":10965},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"1. Creating the instance of ","position":{"start":{"line":245,"column":5,"offset":10971},"end":{"line":245,"column":33,"offset":10999},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":245,"column":33,"offset":10999},"end":{"line":245,"column":38,"offset":11004},"indent":[]}}],"position":{"start":{"line":245,"column":1,"offset":10967},"end":{"line":245,"column":38,"offset":11004},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It also sets some default configuration for ","position":{"start":{"line":247,"column":1,"offset":11006},"end":{"line":247,"column":45,"offset":11050},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":247,"column":45,"offset":11050},"end":{"line":247,"column":50,"offset":11055},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":247,"column":50,"offset":11055},"end":{"line":247,"column":51,"offset":11056},"indent":[]}}],"position":{"start":{"line":247,"column":1,"offset":11006},"end":{"line":247,"column":51,"offset":11056},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"/* tslint:disable */\n// generated by typescript-json-validator\nimport { inspect } from 'util';\nimport Ajv = require('ajv');\nimport ExampleType from './ExampleType';\n\nexport const ajv = new Ajv({\n  allErrors: true,\n  coerceTypes: false,\n  format: 'fast',\n  nullable: true,\n  unicode: true,\n  uniqueItems: true,\n  useDefaults: true,\n});\n\najv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'));\n\nexport { ExampleType };","position":{"start":{"line":249,"column":1,"offset":11058},"end":{"line":269,"column":4,"offset":11506},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"2. Definition of the ","position":{"start":{"line":271,"column":5,"offset":11512},"end":{"line":271,"column":26,"offset":11533},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":271,"column":26,"offset":11533},"end":{"line":271,"column":34,"offset":11541},"indent":[]}},{"type":"text","value":" from the Type","position":{"start":{"line":271,"column":34,"offset":11541},"end":{"line":271,"column":48,"offset":11555},"indent":[]}}],"position":{"start":{"line":271,"column":1,"offset":11508},"end":{"line":271,"column":48,"offset":11555},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is the key of this approach.","position":{"start":{"line":273,"column":1,"offset":11557},"end":{"line":273,"column":34,"offset":11590},"indent":[]}}],"position":{"start":{"line":273,"column":1,"offset":11557},"end":{"line":273,"column":34,"offset":11590},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"// Definition of Schema\nexport const ExampleTypeSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  defaultProperties: [],\n  properties: {\n    age: {\n      type: 'number',\n    },\n    name: {\n      type: 'string',\n    },\n    pets: {\n      items: {\n        defaultProperties: [],\n        properties: {\n          legs: {\n            type: 'number',\n          },\n          name: {\n            type: 'string',\n          },\n        },\n        required: ['legs', 'name'],\n        type: 'object',\n      },\n      type: 'array',\n    },\n  },\n  required: ['name', 'pets'],\n  type: 'object',\n};","position":{"start":{"line":275,"column":1,"offset":11592},"end":{"line":307,"column":4,"offset":12206},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"3. Export validation function using the generated ","position":{"start":{"line":309,"column":5,"offset":12212},"end":{"line":309,"column":55,"offset":12262},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":309,"column":55,"offset":12262},"end":{"line":309,"column":63,"offset":12270},"indent":[]}}],"position":{"start":{"line":309,"column":1,"offset":12208},"end":{"line":309,"column":63,"offset":12270},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It takes care also of throwing an Exception in case there is an error.","position":{"start":{"line":311,"column":1,"offset":12272},"end":{"line":311,"column":71,"offset":12342},"indent":[]}}],"position":{"start":{"line":311,"column":1,"offset":12272},"end":{"line":311,"column":71,"offset":12342},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"export type ValidateFunction<T> = ((data: unknown) => data is T) &\n  Pick<Ajv.ValidateFunction, 'errors'>;\nexport const isExampleType = ajv.compile(ExampleTypeSchema) as ValidateFunction<\n  ExampleType\n>;\n\nexport default function validate(value: unknown): ExampleType {\n  if (isExampleType(value)) {\n    return value;\n  } else {\n    throw new Error(\n      ajv.errorsText(\n        isExampleType.errors!.filter((e: any) => e.keyword !== 'if'),\n        { dataVar: 'ExampleType' },\n      ) +\n        '\\n\\n' +\n        inspect(value),\n    );\n  }\n}","position":{"start":{"line":313,"column":1,"offset":12344},"end":{"line":334,"column":4,"offset":12903},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To use the validator, you just need to import from the respective path and call it. Be aware that this function is already checking if there were any errors inside the object, therefore it's not needed to add an ","position":{"start":{"line":336,"column":1,"offset":12905},"end":{"line":336,"column":213,"offset":13117},"indent":[]}},{"type":"inlineCode","value":"if","position":{"start":{"line":336,"column":213,"offset":13117},"end":{"line":336,"column":217,"offset":13121},"indent":[]}},{"type":"text","value":" statement here, making the code much cleaner.","position":{"start":{"line":336,"column":217,"offset":13121},"end":{"line":336,"column":263,"offset":13167},"indent":[]}}],"position":{"start":{"line":336,"column":1,"offset":12905},"end":{"line":336,"column":263,"offset":13167},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"import validate from 'src/types/ExampleType.validator';\n\nconst getBiped = async () => {\n  const data = validate(await fetchData());\n\n  return data.pets.find((pet) => pet.legs === 2);\n};","position":{"start":{"line":338,"column":1,"offset":13169},"end":{"line":346,"column":4,"offset":13372},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Typescript ❤️ Ajv","position":{"start":{"line":348,"column":5,"offset":13378},"end":{"line":348,"column":22,"offset":13395},"indent":[]}}],"position":{"start":{"line":348,"column":1,"offset":13374},"end":{"line":348,"column":22,"offset":13395},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This library uses ","position":{"start":{"line":350,"column":1,"offset":13397},"end":{"line":350,"column":19,"offset":13415},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":350,"column":19,"offset":13415},"end":{"line":350,"column":24,"offset":13420},"indent":[]}},{"type":"text","value":" under the hood to create the Validator function, which means that you can make use of all nice features it provides, such as custom validation for types.","position":{"start":{"line":350,"column":24,"offset":13420},"end":{"line":350,"column":178,"offset":13574},"indent":[]}}],"position":{"start":{"line":350,"column":1,"offset":13397},"end":{"line":350,"column":178,"offset":13574},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let's create a new definition type for ","position":{"start":{"line":352,"column":1,"offset":13576},"end":{"line":352,"column":40,"offset":13615},"indent":[]}},{"type":"inlineCode","value":"ExampleType","position":{"start":{"line":352,"column":40,"offset":13615},"end":{"line":352,"column":53,"offset":13628},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":352,"column":53,"offset":13628},"end":{"line":352,"column":54,"offset":13629},"indent":[]}}],"position":{"start":{"line":352,"column":1,"offset":13576},"end":{"line":352,"column":54,"offset":13629},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"interface ExampleType {\n  /**\n   * @format email\n   */\n  email?: string;\n  /**\n   * @minimum 0\n   * @maximum 100\n   */\n  answer: number;\n}","position":{"start":{"line":354,"column":1,"offset":13631},"end":{"line":366,"column":4,"offset":13787},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Above each property you find some annotations made inside comments bracket, these will be translated into ","position":{"start":{"line":368,"column":1,"offset":13789},"end":{"line":368,"column":107,"offset":13895},"indent":[]}},{"type":"inlineCode","value":"ajv","position":{"start":{"line":368,"column":107,"offset":13895},"end":{"line":368,"column":112,"offset":13900},"indent":[]}},{"type":"text","value":" rules when the library generates the final Schema. This is the result:","position":{"start":{"line":368,"column":112,"offset":13900},"end":{"line":368,"column":183,"offset":13971},"indent":[]}}],"position":{"start":{"line":368,"column":1,"offset":13789},"end":{"line":368,"column":183,"offset":13971},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"export const ExampleTypeSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  defaultProperties: [],\n  properties: {\n    answer: {\n      maximum: 100,\n      minimum: 0,\n      type: 'number',\n    },\n    email: {\n      format: 'email',\n      type: 'string',\n    },\n  },\n  required: ['answer'],\n  type: 'object',\n};","position":{"start":{"line":370,"column":1,"offset":13973},"end":{"line":388,"column":4,"offset":14316},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The property ","position":{"start":{"line":390,"column":1,"offset":14318},"end":{"line":390,"column":14,"offset":14331},"indent":[]}},{"type":"inlineCode","value":"answer","position":{"start":{"line":390,"column":14,"offset":14331},"end":{"line":390,"column":22,"offset":14339},"indent":[]}},{"type":"text","value":" presents now two more attributes that will check if the ","position":{"start":{"line":390,"column":22,"offset":14339},"end":{"line":390,"column":79,"offset":14396},"indent":[]}},{"type":"inlineCode","value":"number","position":{"start":{"line":390,"column":79,"offset":14396},"end":{"line":390,"column":87,"offset":14404},"indent":[]}},{"type":"text","value":" is between 0 and 100. In the case of ","position":{"start":{"line":390,"column":87,"offset":14404},"end":{"line":390,"column":125,"offset":14442},"indent":[]}},{"type":"inlineCode","value":"email","position":{"start":{"line":390,"column":125,"offset":14442},"end":{"line":390,"column":132,"offset":14449},"indent":[]}},{"type":"text","value":", it will check if the ","position":{"start":{"line":390,"column":132,"offset":14449},"end":{"line":390,"column":155,"offset":14472},"indent":[]}},{"type":"inlineCode","value":"string","position":{"start":{"line":390,"column":155,"offset":14472},"end":{"line":390,"column":163,"offset":14480},"indent":[]}},{"type":"text","value":" value belongs to a valid email address.","position":{"start":{"line":390,"column":163,"offset":14480},"end":{"line":390,"column":203,"offset":14520},"indent":[]}}],"position":{"start":{"line":390,"column":1,"offset":14318},"end":{"line":390,"column":203,"offset":14520},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As these annotations are wrapped inside comments, they don't present any conflict with the Typescript compiler.","position":{"start":{"line":392,"column":1,"offset":14522},"end":{"line":392,"column":112,"offset":14633},"indent":[]}}],"position":{"start":{"line":392,"column":1,"offset":14522},"end":{"line":392,"column":112,"offset":14633},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Making it part of your workflow","position":{"start":{"line":394,"column":4,"offset":14638},"end":{"line":394,"column":35,"offset":14669},"indent":[]}}],"position":{"start":{"line":394,"column":1,"offset":14635},"end":{"line":394,"column":35,"offset":14669},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This method is based on the idea that the developer will run the CLI command and generate the validators, otherwise, it exists the possibility that the schema was generated with an older version of the Type, and then it can present mismatches.","position":{"start":{"line":396,"column":1,"offset":14671},"end":{"line":396,"column":244,"offset":14914},"indent":[]}}],"position":{"start":{"line":396,"column":1,"offset":14671},"end":{"line":396,"column":244,"offset":14914},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Fixing this issue is quite easy, you have to simply add a script that will be executed before your code will run. You can call it ","position":{"start":{"line":398,"column":1,"offset":14916},"end":{"line":398,"column":131,"offset":15046},"indent":[]}},{"type":"inlineCode","value":"prebuild","position":{"start":{"line":398,"column":131,"offset":15046},"end":{"line":398,"column":141,"offset":15056},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":398,"column":141,"offset":15056},"end":{"line":398,"column":145,"offset":15060},"indent":[]}},{"type":"inlineCode","value":"prestart","position":{"start":{"line":398,"column":145,"offset":15060},"end":{"line":398,"column":155,"offset":15070},"indent":[]}},{"type":"text","value":", and this is how your ","position":{"start":{"line":398,"column":155,"offset":15070},"end":{"line":398,"column":178,"offset":15093},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":398,"column":178,"offset":15093},"end":{"line":398,"column":192,"offset":15107},"indent":[]}},{"type":"text","value":" can look like:","position":{"start":{"line":398,"column":192,"offset":15107},"end":{"line":398,"column":207,"offset":15122},"indent":[]}}],"position":{"start":{"line":398,"column":1,"offset":14916},"end":{"line":398,"column":207,"offset":15122},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"scripts\": {\n    \"prebuild\": \"typescript-json-validator src/types/ExampleType.ts ExampleType\",\n    \"start\": \"yarn prebuild && ts-node start.ts\",\n    \"build\": \"yarn prebuild && tsc\"\n  }\n}","position":{"start":{"line":400,"column":1,"offset":15124},"end":{"line":408,"column":4,"offset":15326},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"One last recommendation, I recommend ignoring any ","position":{"start":{"line":410,"column":1,"offset":15328},"end":{"line":410,"column":51,"offset":15378},"indent":[]}},{"type":"inlineCode","value":"validator.ts","position":{"start":{"line":410,"column":51,"offset":15378},"end":{"line":410,"column":65,"offset":15392},"indent":[]}},{"type":"text","value":" file from your project, because there is no point in committing these files to your repository as they are going to be generated every time you start your project.","position":{"start":{"line":410,"column":65,"offset":15392},"end":{"line":410,"column":229,"offset":15556},"indent":[]}}],"position":{"start":{"line":410,"column":1,"offset":15328},"end":{"line":410,"column":229,"offset":15556},"indent":[]}},{"type":"thematicBreak","position":{"start":{"line":412,"column":1,"offset":15558},"end":{"line":412,"column":4,"offset":15561},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"My experience with this approach 🙋‍♂️","position":{"start":{"line":414,"column":4,"offset":15566},"end":{"line":414,"column":42,"offset":15604},"indent":[]}}],"position":{"start":{"line":414,"column":1,"offset":15563},"end":{"line":414,"column":42,"offset":15604},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"About 2 months ago, I open-sourced one of my side projects called ","position":{"start":{"line":416,"column":1,"offset":15606},"end":{"line":416,"column":67,"offset":15672},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/EmaSuriano/gatsby-starter-linkedin-resume","children":[{"type":"inlineCode","value":"gatsby-starter-linkedin-resume","position":{"start":{"line":416,"column":68,"offset":15673},"end":{"line":416,"column":100,"offset":15705},"indent":[]}}],"position":{"start":{"line":416,"column":67,"offset":15672},"end":{"line":416,"column":163,"offset":15768},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":416,"column":163,"offset":15768},"end":{"line":416,"column":164,"offset":15769},"indent":[]}}],"position":{"start":{"line":416,"column":1,"offset":15606},"end":{"line":416,"column":164,"offset":15769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In summary, it's a ","position":{"start":{"line":418,"column":1,"offset":15771},"end":{"line":418,"column":20,"offset":15790},"indent":[]}},{"type":"link","title":null,"url":"https://www.gatsbyjs.org/docs/starters/","children":[{"type":"text","value":"Gatsby Starter","position":{"start":{"line":418,"column":21,"offset":15791},"end":{"line":418,"column":35,"offset":15805},"indent":[]}}],"position":{"start":{"line":418,"column":20,"offset":15790},"end":{"line":418,"column":77,"offset":15847},"indent":[]}},{"type":"text","value":" that can retrieve your information from Linked In, using a ","position":{"start":{"line":418,"column":77,"offset":15847},"end":{"line":418,"column":137,"offset":15907},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/linkedtales/scrapedin","children":[{"type":"text","value":"Linked In Crawler","position":{"start":{"line":418,"column":138,"offset":15908},"end":{"line":418,"column":155,"offset":15925},"indent":[]}}],"position":{"start":{"line":418,"column":137,"offset":15907},"end":{"line":418,"column":198,"offset":15968},"indent":[]}},{"type":"text","value":", and generate an HTML and PDF resume from it, using ","position":{"start":{"line":418,"column":198,"offset":15968},"end":{"line":418,"column":251,"offset":16021},"indent":[]}},{"type":"link","title":null,"url":"https://jsonresume.org/","children":[{"type":"text","value":"JSON Resume","position":{"start":{"line":418,"column":252,"offset":16022},"end":{"line":418,"column":263,"offset":16033},"indent":[]}}],"position":{"start":{"line":418,"column":251,"offset":16021},"end":{"line":418,"column":289,"offset":16059},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":418,"column":289,"offset":16059},"end":{"line":418,"column":290,"offset":16060},"indent":[]}}],"position":{"start":{"line":418,"column":1,"offset":15771},"end":{"line":418,"column":290,"offset":16060},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The project presents two main flows:","position":{"start":{"line":420,"column":1,"offset":16062},"end":{"line":420,"column":37,"offset":16098},"indent":[]}}],"position":{"start":{"line":420,"column":1,"offset":16062},"end":{"line":420,"column":37,"offset":16098},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create the resume information: you will be asked to enter your Linked In credentials, then a crawler will open a new browser, read your profile values and finally save all this information inside a JSON file in your directory. After that, the project will transform the data extracted from the crawler into the structure for Json Resume.","position":{"start":{"line":422,"column":4,"offset":16103},"end":{"line":422,"column":341,"offset":16440},"indent":[]}}],"position":{"start":{"line":422,"column":4,"offset":16103},"end":{"line":422,"column":341,"offset":16440},"indent":[]}}],"position":{"start":{"line":422,"column":1,"offset":16100},"end":{"line":422,"column":341,"offset":16440},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Build the project: once the resume information has been processed, Gatsby can generate HTML and PDF with it.","position":{"start":{"line":423,"column":4,"offset":16444},"end":{"line":423,"column":112,"offset":16552},"indent":[]}}],"position":{"start":{"line":423,"column":4,"offset":16444},"end":{"line":423,"column":112,"offset":16552},"indent":[]}}],"position":{"start":{"line":423,"column":1,"offset":16441},"end":{"line":423,"column":112,"offset":16552},"indent":[]}}],"position":{"start":{"line":422,"column":1,"offset":16100},"end":{"line":423,"column":112,"offset":16552},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"At the beginning of this article, I mentioned that it's advisable to validate your external sources. For this project they are:","position":{"start":{"line":425,"column":1,"offset":16554},"end":{"line":425,"column":128,"offset":16681},"indent":[]}}],"position":{"start":{"line":425,"column":1,"offset":16554},"end":{"line":425,"column":128,"offset":16681},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Data coming from the Linked-in crawler","position":{"start":{"line":427,"column":6,"offset":16688},"end":{"line":427,"column":44,"offset":16726},"indent":[]}}],"position":{"start":{"line":427,"column":4,"offset":16686},"end":{"line":427,"column":46,"offset":16728},"indent":[]}},{"type":"text","value":": when dealing with crawlers you should always be very careful with their outcome because it's highly attached to the website that they are getting the data from. In case there is a change on the website, the output from the crawler can be altered.","position":{"start":{"line":427,"column":46,"offset":16728},"end":{"line":427,"column":294,"offset":16976},"indent":[]}}],"position":{"start":{"line":427,"column":4,"offset":16686},"end":{"line":427,"column":294,"offset":16976},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":16683},"end":{"line":427,"column":294,"offset":16976},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Local file with the resume information","position":{"start":{"line":428,"column":6,"offset":16982},"end":{"line":428,"column":44,"offset":17020},"indent":[]}}],"position":{"start":{"line":428,"column":4,"offset":16980},"end":{"line":428,"column":46,"offset":17022},"indent":[]}},{"type":"text","value":": this project allows you to change the content of your resume manually, in reality in case you want to you can skip the creation of the resume information and create it by yourself. If the structure of the resume data is wrong, JSON Resume won't be able to generate the resume properly.","position":{"start":{"line":428,"column":46,"offset":17022},"end":{"line":428,"column":333,"offset":17309},"indent":[]}}],"position":{"start":{"line":428,"column":4,"offset":16980},"end":{"line":428,"column":333,"offset":17309},"indent":[]}}],"position":{"start":{"line":428,"column":1,"offset":16977},"end":{"line":428,"column":333,"offset":17309},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":16683},"end":{"line":428,"column":333,"offset":17309},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"These are the Type definition for each case:","position":{"start":{"line":430,"column":1,"offset":17311},"end":{"line":430,"column":45,"offset":17355},"indent":[]}}],"position":{"start":{"line":430,"column":1,"offset":17311},"end":{"line":430,"column":45,"offset":17355},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"interface LinkedInSchema {\n  contact: ContactItem[];\n  profile: ProfileData;\n  positions: LinkedInPosition[];\n  educations: LinkedInEducation[];\n  skills: Skill[];\n  courses: Course[];\n  languages: LinkedInLanguage[];\n  projects: LinkedInProject[];\n}\n\ninterface JsonResumeSchema {\n  basics: JsonResumeBasics;\n  work: JsonResumeWork[];\n  volunteer?: JsonResumeVolunteer[];\n  education: JsonResumeEducation[];\n  awards?: JsonResumeAward[];\n  publications?: JsonResumePublication[];\n  skills?: JsonResumeSkill[];\n  languages?: JsonResumeLanguage[];\n  interests?: JsonResumeInterest[];\n  references?: JsonResumeReference[];\n  projects?: JsonResumeProject[];\n}","position":{"start":{"line":432,"column":1,"offset":17357},"end":{"line":457,"column":4,"offset":18030},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Both Types present similarities in terms of variable names, but their internal structure differs. This is why it's necessary to transform from one structure to the other on the first flow.","position":{"start":{"line":459,"column":1,"offset":18032},"end":{"line":459,"column":189,"offset":18220},"indent":[]}}],"position":{"start":{"line":459,"column":1,"offset":18032},"end":{"line":459,"column":189,"offset":18220},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"After I set up my project to generate the Validators from these types, checking the structure of the incoming object was a very easy task.","position":{"start":{"line":461,"column":1,"offset":18222},"end":{"line":461,"column":139,"offset":18360},"indent":[]}}],"position":{"start":{"line":461,"column":1,"offset":18222},"end":{"line":461,"column":139,"offset":18360},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Validation of the Crawler result","position":{"start":{"line":463,"column":4,"offset":18365},"end":{"line":463,"column":36,"offset":18397},"indent":[]}}],"position":{"start":{"line":463,"column":1,"offset":18362},"end":{"line":463,"column":36,"offset":18397},"indent":[]}},{"type":"code","lang":"typescript","meta":null,"value":"// src/index.ts\nimport { RESUME_PATH, LINKED_IN_PATH } from './utils/path';\nimport validateLinkedInSchema from './types/LinkedInSchema.validator';\nimport { saveJson, readJson } from './utils/file';\nimport { inquireLoginData, getLinkedInData } from './utils/linkedin';\n\n// ❗️❗️ IMPORT OF THE VALIDATOR  ❗️❗️\nimport mapLinkedInToJSONResume from './utils/mapLinkedInToJSONResume';\n\nexport const main = async ({ renew }) => {\n  if (renew || !readJson(LINKED_IN_PATH)) {\n    const credentials = await inquireLoginData();\n    const linkedInData = await getLinkedInData(credentials);\n\n    saveJson(LINKED_IN_PATH, linkedInData);\n  }\n\n  // ❗️❗️ VALIDATION IN ACTION ❗️❗️\n  const linkedInParsed = validateLinkedInSchema(readJson(LINKED_IN_PATH));\n\n  const jsonResumeData = mapLinkedInToJSONResume(linkedInParsed);\n  saveJson(RESUME_PATH, jsonResumeData);\n};","position":{"start":{"line":465,"column":1,"offset":18399},"end":{"line":489,"column":4,"offset":19265},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Validation of the Resume Information","position":{"start":{"line":491,"column":4,"offset":19270},"end":{"line":491,"column":40,"offset":19306},"indent":[]}}],"position":{"start":{"line":491,"column":1,"offset":19267},"end":{"line":491,"column":40,"offset":19306},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"// gatsby-config.js\nconst { existsSync } = require('fs');\n\n// ❗️❗️ IMPORT OF THE VALIDATOR  ❗️❗️\nconst {\n  default: validateJsonResume,\n} = require('./lib/types/JsonResumeSchema.validator');\n\nif (!existsSync('./resume.json')) {\n  throw new Error(\n    'Please run \"yarn generate-resume\" to generate your resume information.',\n  );\n}\n\n// ❗️❗️ VALIDATION IN ACTION ❗️❗️\nconst resumeJson = validateJsonResume(require('./resume.json'));\n\nmodule.exports = {\n  plugins: [\n    {\n      resolve: 'gatsby-theme-jsonresume',\n      options: {\n        resumeJson,\n      },\n    },\n    'gatsby-plugin-meta-redirect',\n  ],\n};","position":{"start":{"line":493,"column":1,"offset":19308},"end":{"line":522,"column":4,"offset":19934},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"thematicBreak","position":{"start":{"line":524,"column":1,"offset":19936},"end":{"line":524,"column":4,"offset":19939},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Closing Words 🗣","position":{"start":{"line":526,"column":4,"offset":19944},"end":{"line":526,"column":20,"offset":19960},"indent":[]}}],"position":{"start":{"line":526,"column":1,"offset":19941},"end":{"line":526,"column":20,"offset":19960},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To sump up, I created this table comparing the three methods, in which the Dynamic Types approach shows that it grabs the best of the other methods, making it the recommended approach to validate your object.","position":{"start":{"line":528,"column":1,"offset":19962},"end":{"line":528,"column":209,"offset":20170},"indent":[]}}],"position":{"start":{"line":528,"column":1,"offset":19962},"end":{"line":528,"column":209,"offset":20170},"indent":[]}},{"type":"table","align":[null,null,null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Approach","position":{"start":{"line":530,"column":3,"offset":20174},"end":{"line":530,"column":11,"offset":20182},"indent":[]}}],"position":{"start":{"line":530,"column":3,"offset":20174},"end":{"line":530,"column":28,"offset":20199},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Manual","position":{"start":{"line":530,"column":31,"offset":20202},"end":{"line":530,"column":37,"offset":20208},"indent":[]}}],"position":{"start":{"line":530,"column":31,"offset":20202},"end":{"line":530,"column":37,"offset":20208},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Library","position":{"start":{"line":530,"column":40,"offset":20211},"end":{"line":530,"column":47,"offset":20218},"indent":[]}}],"position":{"start":{"line":530,"column":40,"offset":20211},"end":{"line":530,"column":47,"offset":20218},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"Dynamic Types","position":{"start":{"line":530,"column":50,"offset":20221},"end":{"line":530,"column":63,"offset":20234},"indent":[]}}],"position":{"start":{"line":530,"column":50,"offset":20221},"end":{"line":530,"column":63,"offset":20234},"indent":[]}}],"position":{"start":{"line":530,"column":1,"offset":20172},"end":{"line":530,"column":65,"offset":20236},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"No additional Syntax","position":{"start":{"line":532,"column":3,"offset":20304},"end":{"line":532,"column":23,"offset":20324},"indent":[]}}],"position":{"start":{"line":532,"column":3,"offset":20304},"end":{"line":532,"column":28,"offset":20329},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"✅","position":{"start":{"line":532,"column":31,"offset":20332},"end":{"line":532,"column":32,"offset":20333},"indent":[]}}],"position":{"start":{"line":532,"column":31,"offset":20332},"end":{"line":532,"column":36,"offset":20337},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"❌","position":{"start":{"line":532,"column":39,"offset":20340},"end":{"line":532,"column":40,"offset":20341},"indent":[]}}],"position":{"start":{"line":532,"column":39,"offset":20340},"end":{"line":532,"column":45,"offset":20346},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"✅","position":{"start":{"line":532,"column":48,"offset":20349},"end":{"line":532,"column":49,"offset":20350},"indent":[]}}],"position":{"start":{"line":532,"column":48,"offset":20349},"end":{"line":532,"column":60,"offset":20361},"indent":[]}}],"position":{"start":{"line":532,"column":1,"offset":20302},"end":{"line":532,"column":62,"offset":20363},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Validators and Types Sync","position":{"start":{"line":533,"column":3,"offset":20366},"end":{"line":533,"column":28,"offset":20391},"indent":[]}}],"position":{"start":{"line":533,"column":3,"offset":20366},"end":{"line":533,"column":28,"offset":20391},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"❌","position":{"start":{"line":533,"column":31,"offset":20394},"end":{"line":533,"column":32,"offset":20395},"indent":[]}}],"position":{"start":{"line":533,"column":31,"offset":20394},"end":{"line":533,"column":36,"offset":20399},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"❓","position":{"start":{"line":533,"column":39,"offset":20402},"end":{"line":533,"column":40,"offset":20403},"indent":[]}}],"position":{"start":{"line":533,"column":39,"offset":20402},"end":{"line":533,"column":45,"offset":20408},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"✅","position":{"start":{"line":533,"column":48,"offset":20411},"end":{"line":533,"column":49,"offset":20412},"indent":[]}}],"position":{"start":{"line":533,"column":48,"offset":20411},"end":{"line":533,"column":60,"offset":20423},"indent":[]}}],"position":{"start":{"line":533,"column":1,"offset":20364},"end":{"line":533,"column":62,"offset":20425},"indent":[]}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Standardization","position":{"start":{"line":534,"column":3,"offset":20428},"end":{"line":534,"column":18,"offset":20443},"indent":[]}}],"position":{"start":{"line":534,"column":3,"offset":20428},"end":{"line":534,"column":28,"offset":20453},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"❌","position":{"start":{"line":534,"column":31,"offset":20456},"end":{"line":534,"column":32,"offset":20457},"indent":[]}}],"position":{"start":{"line":534,"column":31,"offset":20456},"end":{"line":534,"column":36,"offset":20461},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"✅","position":{"start":{"line":534,"column":39,"offset":20464},"end":{"line":534,"column":40,"offset":20465},"indent":[]}}],"position":{"start":{"line":534,"column":39,"offset":20464},"end":{"line":534,"column":45,"offset":20470},"indent":[]}},{"type":"tableCell","children":[{"type":"text","value":"✅","position":{"start":{"line":534,"column":48,"offset":20473},"end":{"line":534,"column":49,"offset":20474},"indent":[]}}],"position":{"start":{"line":534,"column":48,"offset":20473},"end":{"line":534,"column":60,"offset":20485},"indent":[]}}],"position":{"start":{"line":534,"column":1,"offset":20426},"end":{"line":534,"column":62,"offset":20487},"indent":[]}}],"position":{"start":{"line":530,"column":1,"offset":20172},"end":{"line":534,"column":62,"offset":20487},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In case you are working in a Typescript codebase, I recommend you to give a try to this new of validating your object. It's very easy to make the set up for it, and in case you don't find it useful removing from the codebase is as easy as removing an ","position":{"start":{"line":536,"column":1,"offset":20489},"end":{"line":536,"column":252,"offset":20740},"indent":[]}},{"type":"inlineCode","value":"import","position":{"start":{"line":536,"column":252,"offset":20740},"end":{"line":536,"column":260,"offset":20748},"indent":[]}},{"type":"text","value":" from your files.","position":{"start":{"line":536,"column":260,"offset":20748},"end":{"line":536,"column":277,"offset":20765},"indent":[]}}],"position":{"start":{"line":536,"column":1,"offset":20489},"end":{"line":536,"column":277,"offset":20765},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Dynamic Types Validation in Typescript\",\"author\":\"Ema Suriano\",\"date\":\"2020-06-01T00:00:00.000Z\",\"hero\":\"./images/hero.jpg\",\"excerpt\":\"There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.\",\"secret\":false}","position":{"start":{"line":539,"column":1,"offset":20768},"end":{"line":539,"column":465,"offset":21232},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":539,"column":465,"offset":21232}}},"scopeImports":["import * as React from 'react'"],"scopeIdentifiers":["React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Dynamic Types Validation in Typescript\",\n  \"author\": \"Ema Suriano\",\n  \"date\": \"2020-06-01T00:00:00.000Z\",\n  \"hero\": \"./images/hero.jpg\",\n  \"excerpt\": \"There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.\",\n  \"secret\": false\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar YouTube = makeShortcode(\"YouTube\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.\"), mdx(\"p\", null, \"I gave a talk about the same topic in the Typescript Meetup of Berlin. This article and the talk cover the same content, so you pick any of them to learn about this topic!\"), mdx(\"div\", {\n    className: \"Image__Medium\"\n  }, mdx(YouTube, {\n    videoId: \"cn6i5Av-B8Q\",\n    opts: {\n      \"start\": \"1884\"\n    },\n    mdxType: \"YouTube\"\n  }), mdx(\"figcaption\", null, \"Link to the talk\")), mdx(\"p\", null, \"Most of the people think that by using Typescript as their application language, they are \\u201Ccovered\\u201D from any emptiness error, like the classic \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201Cundefined is not a function\\u201D\"), \" or my favorite \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u201Ccan\\u2019t read property X of undefined\\u201D\"), \".\"), mdx(\"p\", null, \"This assumption is wrong, and the best way to demonstrate it is with code!\"), mdx(\"h1\", {\n    \"id\": \"why-will-typescript-not-always-cover-you-\"\n  }, \"Why will Typescript NOT always cover you? \\uD83D\\uDD75\"), mdx(\"p\", null, \"The following example does \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not\"), \" present any Typescript error.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// Typescript definition\\ntype ExampleType = {\\n  name: string,\\n  age?: number,\\n  pets: {\\n    name: string,\\n    legs: number,\\n  }[],\\n};\\n\\n// communicates with external API\\nconst fetchData = (): Promise<ExampleType> => {};\\n\\nconst getBiped = async () => {\\n  const data = await fetchData();\\n  console.log(data);\\n  // { name: 'John' }\\n  return data.pets.find((pet) => pet.legs === 2); // Boom!\\n};\\n\")), mdx(\"p\", null, \"The snippet contains:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ExampleType\"), \": A type definition with two properties required \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \", and one optional \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"age\"), \". The property \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \" is an array of objects with \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"legs\"), \", both required.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"fetchData\"), \": A function to retrieve data from an external endpoint.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"getBiped\"), \": Another function that will call \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"fetchData\"), \" and then iterate over the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \", and return only the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \" with two \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"legs\"), \".\")), mdx(\"p\", null, \"So, why my script will fail when I execute it? The reason is, the external API is returning an object which doesn\\u2019t contain \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pets\"), \" inside, and then when you try to execute \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data.pets.find()\"), \", you will receive the error of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Uncaught ReferenceError: Cannot read property 'find' of undefined\"), \".\"), mdx(\"p\", null, \"Inside the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://reactjs.org/docs/static-type-checking.html\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"React official Documentation\"), \" you can find a very nice definition of what Typescript is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"TypeScript is a programming language developed by Microsoft. It is a typed superset of JavaScript and includes its compiler. Being a typed language, TypeScript can catch errors and bugs at build time, long before your app goes live.\")), mdx(\"p\", null, \"Given that definition, it\\u2019s possible to formulate a new assumption:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Typescript performs static type validation. Developers should take of dynamic validations.\")), mdx(\"p\", null, \"So then: \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Do you need to validate everything? \\uD83E\\uDD14\")), mdx(\"p\", null, \"Simply, \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"No\"), \" \\uD83C\\uDF89\"), mdx(\"p\", null, \"Checking all the variables of our application is time-consuming from a development and performance perspective. A nice rule of thumb you can follow is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Validate all the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"external\"), \" sources of your application.\")), mdx(\"p\", null, \"External sources are everything that it\\u2019s external or doesn\\u2019t have access to your application. Some examples:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"APIs responses\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Content inside files\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Input from the user\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Untyped Libraries\")), mdx(\"p\", null, \"An application will always present at least one external source, otherwise, it will be very useless. Therefore, let\\u2019s take a look at how you can write validations for your object in Typescript.\"), mdx(\"p\", null, \"To keep things simple, the original snippet will be considered the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"base\"), \" and on top, I will show how to implement each of the Validation Methods.\"), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"manual-validation-♂️\"\n  }, \"Manual Validation \\uD83D\\uDC77\\u200D\\u2642\\uFE0F\"), mdx(\"p\", null, \"Most basic validation, it\\u2019s a set of conditions that check if the structure is the expected one.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"const validate = (data: ExampleType) => {\\n  if (!data.pets) return false;\\n  // perform more checks\\n\\n  return true;\\n};\\n\\nconst getBiped = async () => {\\n  const data = await fetchData();\\n  console.log(data);\\n  // { name: 'John' }\\n\\n  if (!validate(data))\\n    throw Error('Validation error: data is not complete ...');\\n\\n  return data.pets.find((pet) => pet.legs === 2);\\n};\\n\")), mdx(\"p\", null, \"As you can see a new function has been defined, called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"validate\"), \", which receives as a parameter an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ExampleType\"), \" object, with which is going to check if the property \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pets\"), \" is defined or not. In case not, it will return \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"false\"), \", which will end up throwing an Error with a description message. Otherwise, it will continue the execution and now when evaluating \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data.pets.find\"), \", it won\\u2019t throw an error.\"), mdx(\"p\", null, \"Be aware that the implementation that the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"validate\"), \" function is quite simple, and there is room for many more checks, such as:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \" should exist\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \" should be a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"string\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"if \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"age\"), \" exists, it should be a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"number\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \" should be an \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"array\"), \" of \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"object\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"each \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pet\"), \" Object should have a property \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"name\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"legs\"), \".\")), mdx(\"p\", null, \"The more checks you add, the more robust your application will be, but the more time you need to invest too.\"), mdx(\"p\", null, \"The advantages of this method are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"No external library required\"), \": only pure Typescript.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Business-centric\"), \": you can add any business logic inside these validators, for example, you can check that \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"propertyA\"), \" shouldn\\u2019t exist if \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"propertyB\"), \" is present.\")), mdx(\"p\", null, \"It also presents some disadvantages:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Manual work\"), \": every validation has to be manually coded and this can be quite time-consuming.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Duplication of code\"), \": in the example, \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ExampleType\"), \" already defines that there is a \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"pets\"), \" property and that it is required, but again inside the validation code you should still check that it\\u2019s true.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Room for bugs\"), \": in the previous code, there were many \\u201Cbugs\\u201D or places for improvement.\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"using-a-validation-library-\"\n  }, \"Using a Validation Library \\u2728\"), mdx(\"p\", null, \"Why re-inventing the wheel, right? This method consists of using any validation library to assert the structure of the objects. To name some of the most used libraries:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ajv-validator/ajv\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"ajv\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/hapijs/joi\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"joi\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/imbrn/v8n\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"v8n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://github.com/ansman/validate.js\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"validate.js\")))), mdx(\"p\", null, \"The validation library used for this article is \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ajv\"), \", nevertheless, all the conclusions also apply to the other libraries.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"const Ajv = require('ajv');\\nconst ajv = new Ajv();\\n\\nconst validate = ajv.compile({\\n  properties: {\\n    name: {\\n      type: 'string',\\n      minLength: 3,\\n    },\\n    age: { type: 'number' },\\n    pets: {\\n      type: 'array',\\n      items: {\\n        name: {\\n          type: 'string',\\n          minLength: 3,\\n        },\\n        legs: { type: 'number' },\\n      },\\n    },\\n  },\\n  required: ['name', 'pets'],\\n  type: 'object',\\n});\\n\\nconst getBiped = async () => {\\n  const data = await fetchData();\\n  console.log(data);\\n  // { name: 'John' }\\n  if (!validate(data)) {\\n    throw Error('Validation failed: ' + ajv.errorsText(validate.errors));\\n    // Error: Validation failed: data should have required property 'pets'\\n  }\\n\\n  return data.pets.find((pet) => pet.legs === 2);\\n};\\n\")), mdx(\"p\", null, \"Many validation libraries force you to define a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"schema\"), \" where you can describe the structure to evaluate. Given that schema, you can create the validation function which is going to be used in your code.\"), mdx(\"p\", null, \"The declaration of your schema will always depend on the library you are using, therefore I always recommend checking the official docs. For the case of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ajv\"), \", it enforces you to declare in an Object Style, where each property has to provide the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"type\"), \" of it and, also, it\\u2019s possible to set custom checker for these values, like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"minLength\"), \" for any \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"array\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"string\"), \".\"), mdx(\"p\", null, \"This method provides:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"A standardized way to create validators and checks\"), \": the idea behind the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"schema\"), \" is to have only \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"one\"), \" way to check for specific conditions inside your application. Especially in JavaScript where there are many ways to accomplish the same task, such as checking the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"length\"), \" of an array. This quality is great to improve communication and collaboration inside a team.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Improvement of Error Reporting\"), \": in case there is a mismatch on some property the library will inform you which one is the property in a human-friendly way, rather than just printing the Stack Trace.\")), mdx(\"p\", null, \"This new way of creating validations present the following drawbacks:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Introduction of new Syntax\"), \": when a team decides to add a new library, the difficulty degree to understand the whole codebase grows too. Every contributor has to know about the validator schema to understand how to make a change on it.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Validators and Types are not in Sync\"), \": the definition of the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"schema\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ExampleType\"), \" are disconnected, which means that every time you make a change inside the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"ExampleType\"), \", you have to manually reflect it inside the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"schema\"), \". Depending on how many validators, you have this task can be quite tedious.\")), mdx(\"p\", null, \"One small comment regarding keeping in Sync Validators and Types, some open-source projects address this issue, such as \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.npmjs.com/package/json-schema-to-typescript\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"json-schema-to-typescript\"), \", which can generate a Type definition from an existing Schema. Then this won\\u2019t be considered a problem.\"), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"dynamic-types-validator-\"\n  }, \"Dynamic Types Validator \\uD83D\\uDD0C\"), mdx(\"p\", null, \"This is the method I want to talk about, and it presents a change of paradigm regarding how to create Validators and keep Types in sync.\"), mdx(\"p\", null, \"In the two other methods, the Validator and the Type can be seen as different entities. The Validator will take the incoming Object and check its properties, and the Type statically belongs to the Object. Combining both entities, the result is a \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Validated Types Object\"), \".\"), mdx(\"div\", {\n    \"className\": \"Image__Small\"\n  }, \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"div\"\n  }, {\n    \"src\": \"/7c35bd7abc5ccfe266557fd9bdccd0f5/before.svg\",\n    \"alt\": \"Before\"\n  })), \"\\n  \", mdx(\"figcaption\", {\n    parentName: \"div\"\n  }, \"Before\")), mdx(\"p\", null, \"The method of Dynamic Types Validator allows a Type to generate a validator from his definition. Now they have are related, where a Validator depends entirely on a Type, preventing any mismatch between structures.\"), mdx(\"div\", {\n    \"className\": \"Image__Small\"\n  }, \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"div\"\n  }, {\n    \"src\": \"/8c4f0176dcbcccde1b3e1b66cef949da/now.svg\",\n    \"alt\": \"Now\"\n  })), \"\\n  \", mdx(\"figcaption\", {\n    parentName: \"div\"\n  }, \"Now\")), mdx(\"hr\", null), mdx(\"h3\", {\n    \"id\": \"generation-of-validators-\"\n  }, \"Generation of Validators \\uD83E\\uDD16\"), mdx(\"p\", null, \"To generate these Validators, I found an amazing Open Source project called \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/ForbesLindesay/typescript-json-validator\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"typescript-json-validator\")), \", made by \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://twitter.com/ForbesLindesay\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"@ForbesLindesay\"), \". The description of the repository is:\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Automatically generate a validator using JSON Schema and AJV for any TypeScript type.\")), mdx(\"p\", null, \"For the test, lets re-use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ExampleType\"), \" definition, which now has been moved to a separate file inside the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"types\"), \" folder.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"// src/types/ExampleType.ts\\n\\ntype ExampleType = {\\n  name: string;\\n  age?: number;\\n  pets: {\\n    name: string;\\n    legs: number;\\n  }[];\\n};\\n\")), mdx(\"p\", null, \"This library exposes a handy CLI that can be called from anywhere, and given a file path and the name of the Type, it will generate in the same location as the file a new file with the Validator code.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"> npx typescript-json-validator src/types/ExampleType.ts ExampleType\\n# ExampleType.validator.ts created!\\n\")), mdx(\"p\", null, \"The resulting validator can be a very long file, so let\\u2019s take a look piece by piece:\"), mdx(\"h3\", {\n    \"id\": \"1-creating-the-instance-of-ajv\"\n  }, \"1. Creating the instance of \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"ajv\")), mdx(\"p\", null, \"It also sets some default configuration for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ajv\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"/* tslint:disable */\\n// generated by typescript-json-validator\\nimport { inspect } from 'util';\\nimport Ajv = require('ajv');\\nimport ExampleType from './ExampleType';\\n\\nexport const ajv = new Ajv({\\n  allErrors: true,\\n  coerceTypes: false,\\n  format: 'fast',\\n  nullable: true,\\n  unicode: true,\\n  uniqueItems: true,\\n  useDefaults: true,\\n});\\n\\najv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'));\\n\\nexport { ExampleType };\\n\")), mdx(\"h3\", {\n    \"id\": \"2-definition-of-the-schema-from-the-type\"\n  }, \"2. Definition of the \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"schema\"), \" from the Type\"), mdx(\"p\", null, \"This is the key of this approach.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"// Definition of Schema\\nexport const ExampleTypeSchema = {\\n  $schema: 'http://json-schema.org/draft-07/schema#',\\n  defaultProperties: [],\\n  properties: {\\n    age: {\\n      type: 'number',\\n    },\\n    name: {\\n      type: 'string',\\n    },\\n    pets: {\\n      items: {\\n        defaultProperties: [],\\n        properties: {\\n          legs: {\\n            type: 'number',\\n          },\\n          name: {\\n            type: 'string',\\n          },\\n        },\\n        required: ['legs', 'name'],\\n        type: 'object',\\n      },\\n      type: 'array',\\n    },\\n  },\\n  required: ['name', 'pets'],\\n  type: 'object',\\n};\\n\")), mdx(\"h3\", {\n    \"id\": \"3-export-validation-function-using-the-generated-schema\"\n  }, \"3. Export validation function using the generated \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \"schema\")), mdx(\"p\", null, \"It takes care also of throwing an Exception in case there is an error.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"export type ValidateFunction<T> = ((data: unknown) => data is T) &\\n  Pick<Ajv.ValidateFunction, 'errors'>;\\nexport const isExampleType = ajv.compile(ExampleTypeSchema) as ValidateFunction<\\n  ExampleType\\n>;\\n\\nexport default function validate(value: unknown): ExampleType {\\n  if (isExampleType(value)) {\\n    return value;\\n  } else {\\n    throw new Error(\\n      ajv.errorsText(\\n        isExampleType.errors!.filter((e: any) => e.keyword !== 'if'),\\n        { dataVar: 'ExampleType' },\\n      ) +\\n        '\\\\n\\\\n' +\\n        inspect(value),\\n    );\\n  }\\n}\\n\")), mdx(\"p\", null, \"To use the validator, you just need to import from the respective path and call it. Be aware that this function is already checking if there were any errors inside the object, therefore it\\u2019s not needed to add an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"if\"), \" statement here, making the code much cleaner.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"import validate from 'src/types/ExampleType.validator';\\n\\nconst getBiped = async () => {\\n  const data = validate(await fetchData());\\n\\n  return data.pets.find((pet) => pet.legs === 2);\\n};\\n\")), mdx(\"h3\", {\n    \"id\": \"typescript-️-ajv\"\n  }, \"Typescript \\u2764\\uFE0F Ajv\"), mdx(\"p\", null, \"This library uses \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ajv\"), \" under the hood to create the Validator function, which means that you can make use of all nice features it provides, such as custom validation for types.\"), mdx(\"p\", null, \"Let\\u2019s create a new definition type for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ExampleType\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface ExampleType {\\n  /**\\n   * @format email\\n   */\\n  email?: string;\\n  /**\\n   * @minimum 0\\n   * @maximum 100\\n   */\\n  answer: number;\\n}\\n\")), mdx(\"p\", null, \"Above each property you find some annotations made inside comments bracket, these will be translated into \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ajv\"), \" rules when the library generates the final Schema. This is the result:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"export const ExampleTypeSchema = {\\n  $schema: 'http://json-schema.org/draft-07/schema#',\\n  defaultProperties: [],\\n  properties: {\\n    answer: {\\n      maximum: 100,\\n      minimum: 0,\\n      type: 'number',\\n    },\\n    email: {\\n      format: 'email',\\n      type: 'string',\\n    },\\n  },\\n  required: ['answer'],\\n  type: 'object',\\n};\\n\")), mdx(\"p\", null, \"The property \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"answer\"), \" presents now two more attributes that will check if the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"number\"), \" is between 0 and 100. In the case of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"email\"), \", it will check if the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"string\"), \" value belongs to a valid email address.\"), mdx(\"p\", null, \"As these annotations are wrapped inside comments, they don\\u2019t present any conflict with the Typescript compiler.\"), mdx(\"h2\", {\n    \"id\": \"making-it-part-of-your-workflow\"\n  }, \"Making it part of your workflow\"), mdx(\"p\", null, \"This method is based on the idea that the developer will run the CLI command and generate the validators, otherwise, it exists the possibility that the schema was generated with an older version of the Type, and then it can present mismatches.\"), mdx(\"p\", null, \"Fixing this issue is quite easy, you have to simply add a script that will be executed before your code will run. You can call it \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prebuild\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prestart\"), \", and this is how your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package.json\"), \" can look like:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"{\\n  \\\"scripts\\\": {\\n    \\\"prebuild\\\": \\\"typescript-json-validator src/types/ExampleType.ts ExampleType\\\",\\n    \\\"start\\\": \\\"yarn prebuild && ts-node start.ts\\\",\\n    \\\"build\\\": \\\"yarn prebuild && tsc\\\"\\n  }\\n}\\n\")), mdx(\"p\", null, \"One last recommendation, I recommend ignoring any \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"validator.ts\"), \" file from your project, because there is no point in committing these files to your repository as they are going to be generated every time you start your project.\"), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"my-experience-with-this-approach-♂️\"\n  }, \"My experience with this approach \\uD83D\\uDE4B\\u200D\\u2642\\uFE0F\"), mdx(\"p\", null, \"About 2 months ago, I open-sourced one of my side projects called \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/EmaSuriano/gatsby-starter-linkedin-resume\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"a\"\n  }, \"gatsby-starter-linkedin-resume\")), \".\"), mdx(\"p\", null, \"In summary, it\\u2019s a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.gatsbyjs.org/docs/starters/\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"Gatsby Starter\"), \" that can retrieve your information from Linked In, using a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/linkedtales/scrapedin\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"Linked In Crawler\"), \", and generate an HTML and PDF resume from it, using \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://jsonresume.org/\",\n    \"target\": \"_blank\",\n    \"rel\": \"noreferrer\"\n  }), \"JSON Resume\"), \".\"), mdx(\"p\", null, \"The project presents two main flows:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Create the resume information: you will be asked to enter your Linked In credentials, then a crawler will open a new browser, read your profile values and finally save all this information inside a JSON file in your directory. After that, the project will transform the data extracted from the crawler into the structure for Json Resume.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Build the project: once the resume information has been processed, Gatsby can generate HTML and PDF with it.\")), mdx(\"p\", null, \"At the beginning of this article, I mentioned that it\\u2019s advisable to validate your external sources. For this project they are:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Data coming from the Linked-in crawler\"), \": when dealing with crawlers you should always be very careful with their outcome because it\\u2019s highly attached to the website that they are getting the data from. In case there is a change on the website, the output from the crawler can be altered.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Local file with the resume information\"), \": this project allows you to change the content of your resume manually, in reality in case you want to you can skip the creation of the resume information and create it by yourself. If the structure of the resume data is wrong, JSON Resume won\\u2019t be able to generate the resume properly.\")), mdx(\"p\", null, \"These are the Type definition for each case:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"interface LinkedInSchema {\\n  contact: ContactItem[];\\n  profile: ProfileData;\\n  positions: LinkedInPosition[];\\n  educations: LinkedInEducation[];\\n  skills: Skill[];\\n  courses: Course[];\\n  languages: LinkedInLanguage[];\\n  projects: LinkedInProject[];\\n}\\n\\ninterface JsonResumeSchema {\\n  basics: JsonResumeBasics;\\n  work: JsonResumeWork[];\\n  volunteer?: JsonResumeVolunteer[];\\n  education: JsonResumeEducation[];\\n  awards?: JsonResumeAward[];\\n  publications?: JsonResumePublication[];\\n  skills?: JsonResumeSkill[];\\n  languages?: JsonResumeLanguage[];\\n  interests?: JsonResumeInterest[];\\n  references?: JsonResumeReference[];\\n  projects?: JsonResumeProject[];\\n}\\n\")), mdx(\"p\", null, \"Both Types present similarities in terms of variable names, but their internal structure differs. This is why it\\u2019s necessary to transform from one structure to the other on the first flow.\"), mdx(\"p\", null, \"After I set up my project to generate the Validators from these types, checking the structure of the incoming object was a very easy task.\"), mdx(\"h2\", {\n    \"id\": \"validation-of-the-crawler-result\"\n  }, \"Validation of the Crawler result\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-typescript\"\n  }), \"// src/index.ts\\nimport { RESUME_PATH, LINKED_IN_PATH } from './utils/path';\\nimport validateLinkedInSchema from './types/LinkedInSchema.validator';\\nimport { saveJson, readJson } from './utils/file';\\nimport { inquireLoginData, getLinkedInData } from './utils/linkedin';\\n\\n// \\u2757\\uFE0F\\u2757\\uFE0F IMPORT OF THE VALIDATOR  \\u2757\\uFE0F\\u2757\\uFE0F\\nimport mapLinkedInToJSONResume from './utils/mapLinkedInToJSONResume';\\n\\nexport const main = async ({ renew }) => {\\n  if (renew || !readJson(LINKED_IN_PATH)) {\\n    const credentials = await inquireLoginData();\\n    const linkedInData = await getLinkedInData(credentials);\\n\\n    saveJson(LINKED_IN_PATH, linkedInData);\\n  }\\n\\n  // \\u2757\\uFE0F\\u2757\\uFE0F VALIDATION IN ACTION \\u2757\\uFE0F\\u2757\\uFE0F\\n  const linkedInParsed = validateLinkedInSchema(readJson(LINKED_IN_PATH));\\n\\n  const jsonResumeData = mapLinkedInToJSONResume(linkedInParsed);\\n  saveJson(RESUME_PATH, jsonResumeData);\\n};\\n\")), mdx(\"h2\", {\n    \"id\": \"validation-of-the-resume-information\"\n  }, \"Validation of the Resume Information\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"// gatsby-config.js\\nconst { existsSync } = require('fs');\\n\\n// \\u2757\\uFE0F\\u2757\\uFE0F IMPORT OF THE VALIDATOR  \\u2757\\uFE0F\\u2757\\uFE0F\\nconst {\\n  default: validateJsonResume,\\n} = require('./lib/types/JsonResumeSchema.validator');\\n\\nif (!existsSync('./resume.json')) {\\n  throw new Error(\\n    'Please run \\\"yarn generate-resume\\\" to generate your resume information.',\\n  );\\n}\\n\\n// \\u2757\\uFE0F\\u2757\\uFE0F VALIDATION IN ACTION \\u2757\\uFE0F\\u2757\\uFE0F\\nconst resumeJson = validateJsonResume(require('./resume.json'));\\n\\nmodule.exports = {\\n  plugins: [\\n    {\\n      resolve: 'gatsby-theme-jsonresume',\\n      options: {\\n        resumeJson,\\n      },\\n    },\\n    'gatsby-plugin-meta-redirect',\\n  ],\\n};\\n\")), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"closing-words-\"\n  }, \"Closing Words \\uD83D\\uDDE3\"), mdx(\"p\", null, \"To sump up, I created this table comparing the three methods, in which the Dynamic Types approach shows that it grabs the best of the other methods, making it the recommended approach to validate your object.\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Approach\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Manual\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Library\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Dynamic Types\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"No additional Syntax\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2705\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u274C\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2705\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Validators and Types Sync\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u274C\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2753\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2705\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Standardization\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u274C\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2705\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"\\u2705\")))), mdx(\"p\", null, \"In case you are working in a Typescript codebase, I recommend you to give a try to this new of validating your object. It\\u2019s very easy to make the set up for it, and in case you don\\u2019t find it useful removing from the codebase is as easy as removing an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import\"), \" from your files.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nexport const _frontmatter = {\n  \"title\": \"Dynamic Types Validation in Typescript\",\n  \"author\": \"Ema Suriano\",\n  \"date\": \"2020-06-01T00:00:00.000Z\",\n  \"hero\": \"./images/hero.jpg\",\n  \"excerpt\": \"There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.\",\n  \"secret\": false\n};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\nconst YouTube = makeShortcode(\"YouTube\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`There is no doubt that Typescript has gained a huge adoption on the JavaScript ecosystem, and one of the great benefits it provides is the type checking of all the variables inside our code. It will check if performing any operation on a variable is possible given its type.`}</p>\n    <p>{`I gave a talk about the same topic in the Typescript Meetup of Berlin. This article and the talk cover the same content, so you pick any of them to learn about this topic!`}</p>\n    <div class=\"Image__Medium\">\n    <YouTube videoId=\"cn6i5Av-B8Q\" opts={{\n        \"start\": \"1884\"\n      }} mdxType=\"YouTube\" />\n  <figcaption>Link to the talk</figcaption>\n    </div>\n    <p>{`Most of the people think that by using Typescript as their application language, they are “covered” from any emptiness error, like the classic `}<em parentName=\"p\">{`“undefined is not a function”`}</em>{` or my favorite `}<em parentName=\"p\">{`“can’t read property X of undefined”`}</em>{`.`}</p>\n    <p>{`This assumption is wrong, and the best way to demonstrate it is with code!`}</p>\n    <h1 {...{\n      \"id\": \"why-will-typescript-not-always-cover-you-\"\n    }}>{`Why will Typescript NOT always cover you? 🕵`}</h1>\n    <p>{`The following example does `}<strong parentName=\"p\">{`not`}</strong>{` present any Typescript error.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// Typescript definition\ntype ExampleType = {\n  name: string,\n  age?: number,\n  pets: {\n    name: string,\n    legs: number,\n  }[],\n};\n\n// communicates with external API\nconst fetchData = (): Promise<ExampleType> => {};\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n  return data.pets.find((pet) => pet.legs === 2); // Boom!\n};\n`}</code></pre>\n    <p>{`The snippet contains:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ExampleType`}</inlineCode>{`: A type definition with two properties required `}<inlineCode parentName=\"li\">{`name`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`pets`}</inlineCode>{`, and one optional `}<inlineCode parentName=\"li\">{`age`}</inlineCode>{`. The property `}<inlineCode parentName=\"li\">{`pets`}</inlineCode>{` is an array of objects with `}<inlineCode parentName=\"li\">{`name`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`legs`}</inlineCode>{`, both required.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`fetchData`}</inlineCode>{`: A function to retrieve data from an external endpoint.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`getBiped`}</inlineCode>{`: Another function that will call `}<inlineCode parentName=\"li\">{`fetchData`}</inlineCode>{` and then iterate over the `}<inlineCode parentName=\"li\">{`pets`}</inlineCode>{`, and return only the `}<inlineCode parentName=\"li\">{`pets`}</inlineCode>{` with two `}<inlineCode parentName=\"li\">{`legs`}</inlineCode>{`.`}</li>\n    </ul>\n    <p>{`So, why my script will fail when I execute it? The reason is, the external API is returning an object which doesn’t contain `}<inlineCode parentName=\"p\">{`pets`}</inlineCode>{` inside, and then when you try to execute `}<inlineCode parentName=\"p\">{`data.pets.find()`}</inlineCode>{`, you will receive the error of `}<inlineCode parentName=\"p\">{`Uncaught ReferenceError: Cannot read property 'find' of undefined`}</inlineCode>{`.`}</p>\n    <p>{`Inside the `}<a parentName=\"p\" {...{\n        \"href\": \"https://reactjs.org/docs/static-type-checking.html\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`React official Documentation`}</a>{` you can find a very nice definition of what Typescript is:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`TypeScript is a programming language developed by Microsoft. It is a typed superset of JavaScript and includes its compiler. Being a typed language, TypeScript can catch errors and bugs at build time, long before your app goes live.`}</p>\n    </blockquote>\n    <p>{`Given that definition, it’s possible to formulate a new assumption:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Typescript performs static type validation. Developers should take of dynamic validations.`}</p>\n    </blockquote>\n    <p>{`So then: `}<em parentName=\"p\">{`Do you need to validate everything? 🤔`}</em></p>\n    <p>{`Simply, `}<strong parentName=\"p\">{`No`}</strong>{` 🎉`}</p>\n    <p>{`Checking all the variables of our application is time-consuming from a development and performance perspective. A nice rule of thumb you can follow is:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Validate all the `}<strong parentName=\"p\">{`external`}</strong>{` sources of your application.`}</p>\n    </blockquote>\n    <p>{`External sources are everything that it’s external or doesn’t have access to your application. Some examples:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`APIs responses`}</li>\n      <li parentName=\"ul\">{`Content inside files`}</li>\n      <li parentName=\"ul\">{`Input from the user`}</li>\n      <li parentName=\"ul\">{`Untyped Libraries`}</li>\n    </ul>\n    <p>{`An application will always present at least one external source, otherwise, it will be very useless. Therefore, let’s take a look at how you can write validations for your object in Typescript.`}</p>\n    <p>{`To keep things simple, the original snippet will be considered the `}<em parentName=\"p\">{`base`}</em>{` and on top, I will show how to implement each of the Validation Methods.`}</p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"manual-validation-♂️\"\n    }}>{`Manual Validation 👷‍♂️`}</h2>\n    <p>{`Most basic validation, it’s a set of conditions that check if the structure is the expected one.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const validate = (data: ExampleType) => {\n  if (!data.pets) return false;\n  // perform more checks\n\n  return true;\n};\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n\n  if (!validate(data))\n    throw Error('Validation error: data is not complete ...');\n\n  return data.pets.find((pet) => pet.legs === 2);\n};\n`}</code></pre>\n    <p>{`As you can see a new function has been defined, called `}<inlineCode parentName=\"p\">{`validate`}</inlineCode>{`, which receives as a parameter an `}<inlineCode parentName=\"p\">{`ExampleType`}</inlineCode>{` object, with which is going to check if the property `}<inlineCode parentName=\"p\">{`pets`}</inlineCode>{` is defined or not. In case not, it will return `}<inlineCode parentName=\"p\">{`false`}</inlineCode>{`, which will end up throwing an Error with a description message. Otherwise, it will continue the execution and now when evaluating `}<inlineCode parentName=\"p\">{`data.pets.find`}</inlineCode>{`, it won’t throw an error.`}</p>\n    <p>{`Be aware that the implementation that the `}<inlineCode parentName=\"p\">{`validate`}</inlineCode>{` function is quite simple, and there is room for many more checks, such as:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`name`}</inlineCode>{` should exist`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`name`}</inlineCode>{` should be a `}<inlineCode parentName=\"li\">{`string`}</inlineCode></li>\n      <li parentName=\"ul\">{`if `}<inlineCode parentName=\"li\">{`age`}</inlineCode>{` exists, it should be a `}<inlineCode parentName=\"li\">{`number`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`pets`}</inlineCode>{` should be an `}<inlineCode parentName=\"li\">{`array`}</inlineCode>{` of `}<inlineCode parentName=\"li\">{`object`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`each `}<inlineCode parentName=\"li\">{`pet`}</inlineCode>{` Object should have a property `}<inlineCode parentName=\"li\">{`name`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`legs`}</inlineCode>{`.`}</li>\n    </ul>\n    <p>{`The more checks you add, the more robust your application will be, but the more time you need to invest too.`}</p>\n    <p>{`The advantages of this method are:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`No external library required`}</strong>{`: only pure Typescript.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Business-centric`}</strong>{`: you can add any business logic inside these validators, for example, you can check that `}<inlineCode parentName=\"li\">{`propertyA`}</inlineCode>{` shouldn’t exist if `}<inlineCode parentName=\"li\">{`propertyB`}</inlineCode>{` is present.`}</li>\n    </ul>\n    <p>{`It also presents some disadvantages:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Manual work`}</strong>{`: every validation has to be manually coded and this can be quite time-consuming.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Duplication of code`}</strong>{`: in the example, `}<inlineCode parentName=\"li\">{`ExampleType`}</inlineCode>{` already defines that there is a `}<inlineCode parentName=\"li\">{`pets`}</inlineCode>{` property and that it is required, but again inside the validation code you should still check that it’s true.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Room for bugs`}</strong>{`: in the previous code, there were many “bugs” or places for improvement.`}</li>\n    </ul>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"using-a-validation-library-\"\n    }}>{`Using a Validation Library ✨`}</h2>\n    <p>{`Why re-inventing the wheel, right? This method consists of using any validation library to assert the structure of the objects. To name some of the most used libraries:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/ajv-validator/ajv\",\n          \"target\": \"_blank\",\n          \"rel\": \"noreferrer\"\n        }}><inlineCode parentName=\"a\">{`ajv`}</inlineCode></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/hapijs/joi\",\n          \"target\": \"_blank\",\n          \"rel\": \"noreferrer\"\n        }}><inlineCode parentName=\"a\">{`joi`}</inlineCode></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/imbrn/v8n\",\n          \"target\": \"_blank\",\n          \"rel\": \"noreferrer\"\n        }}><inlineCode parentName=\"a\">{`v8n`}</inlineCode></a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/ansman/validate.js\",\n          \"target\": \"_blank\",\n          \"rel\": \"noreferrer\"\n        }}><inlineCode parentName=\"a\">{`validate.js`}</inlineCode></a></li>\n    </ul>\n    <p>{`The validation library used for this article is `}<inlineCode parentName=\"p\">{`ajv`}</inlineCode>{`, nevertheless, all the conclusions also apply to the other libraries.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`const Ajv = require('ajv');\nconst ajv = new Ajv();\n\nconst validate = ajv.compile({\n  properties: {\n    name: {\n      type: 'string',\n      minLength: 3,\n    },\n    age: { type: 'number' },\n    pets: {\n      type: 'array',\n      items: {\n        name: {\n          type: 'string',\n          minLength: 3,\n        },\n        legs: { type: 'number' },\n      },\n    },\n  },\n  required: ['name', 'pets'],\n  type: 'object',\n});\n\nconst getBiped = async () => {\n  const data = await fetchData();\n  console.log(data);\n  // { name: 'John' }\n  if (!validate(data)) {\n    throw Error('Validation failed: ' + ajv.errorsText(validate.errors));\n    // Error: Validation failed: data should have required property 'pets'\n  }\n\n  return data.pets.find((pet) => pet.legs === 2);\n};\n`}</code></pre>\n    <p>{`Many validation libraries force you to define a `}<inlineCode parentName=\"p\">{`schema`}</inlineCode>{` where you can describe the structure to evaluate. Given that schema, you can create the validation function which is going to be used in your code.`}</p>\n    <p>{`The declaration of your schema will always depend on the library you are using, therefore I always recommend checking the official docs. For the case of `}<inlineCode parentName=\"p\">{`ajv`}</inlineCode>{`, it enforces you to declare in an Object Style, where each property has to provide the `}<inlineCode parentName=\"p\">{`type`}</inlineCode>{` of it and, also, it’s possible to set custom checker for these values, like `}<inlineCode parentName=\"p\">{`minLength`}</inlineCode>{` for any `}<inlineCode parentName=\"p\">{`array`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`string`}</inlineCode>{`.`}</p>\n    <p>{`This method provides:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`A standardized way to create validators and checks`}</strong>{`: the idea behind the `}<inlineCode parentName=\"li\">{`schema`}</inlineCode>{` is to have only `}<strong parentName=\"li\">{`one`}</strong>{` way to check for specific conditions inside your application. Especially in JavaScript where there are many ways to accomplish the same task, such as checking the `}<inlineCode parentName=\"li\">{`length`}</inlineCode>{` of an array. This quality is great to improve communication and collaboration inside a team.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Improvement of Error Reporting`}</strong>{`: in case there is a mismatch on some property the library will inform you which one is the property in a human-friendly way, rather than just printing the Stack Trace.`}</li>\n    </ul>\n    <p>{`This new way of creating validations present the following drawbacks:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Introduction of new Syntax`}</strong>{`: when a team decides to add a new library, the difficulty degree to understand the whole codebase grows too. Every contributor has to know about the validator schema to understand how to make a change on it.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Validators and Types are not in Sync`}</strong>{`: the definition of the `}<inlineCode parentName=\"li\">{`schema`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`ExampleType`}</inlineCode>{` are disconnected, which means that every time you make a change inside the `}<inlineCode parentName=\"li\">{`ExampleType`}</inlineCode>{`, you have to manually reflect it inside the `}<inlineCode parentName=\"li\">{`schema`}</inlineCode>{`. Depending on how many validators, you have this task can be quite tedious.`}</li>\n    </ul>\n    <p>{`One small comment regarding keeping in Sync Validators and Types, some open-source projects address this issue, such as `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/json-schema-to-typescript\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`json-schema-to-typescript`}</a>{`, which can generate a Type definition from an existing Schema. Then this won’t be considered a problem.`}</p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"dynamic-types-validator-\"\n    }}>{`Dynamic Types Validator 🔌`}</h2>\n    <p>{`This is the method I want to talk about, and it presents a change of paradigm regarding how to create Validators and keep Types in sync.`}</p>\n    <p>{`In the two other methods, the Validator and the Type can be seen as different entities. The Validator will take the incoming Object and check its properties, and the Type statically belongs to the Object. Combining both entities, the result is a `}<strong parentName=\"p\">{`Validated Types Object`}</strong>{`.`}</p>\n    <div {...{\n      \"className\": \"Image__Small\"\n    }}>{`\n  `}<img parentName=\"div\" {...{\n        \"src\": \"/7c35bd7abc5ccfe266557fd9bdccd0f5/before.svg\",\n        \"alt\": \"Before\"\n      }}></img>{`\n  `}<figcaption parentName=\"div\">{`Before`}</figcaption>\n    </div>\n    <p>{`The method of Dynamic Types Validator allows a Type to generate a validator from his definition. Now they have are related, where a Validator depends entirely on a Type, preventing any mismatch between structures.`}</p>\n    <div {...{\n      \"className\": \"Image__Small\"\n    }}>{`\n  `}<img parentName=\"div\" {...{\n        \"src\": \"/8c4f0176dcbcccde1b3e1b66cef949da/now.svg\",\n        \"alt\": \"Now\"\n      }}></img>{`\n  `}<figcaption parentName=\"div\">{`Now`}</figcaption>\n    </div>\n    <hr></hr>\n    <h3 {...{\n      \"id\": \"generation-of-validators-\"\n    }}>{`Generation of Validators 🤖`}</h3>\n    <p>{`To generate these Validators, I found an amazing Open Source project called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ForbesLindesay/typescript-json-validator\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}><inlineCode parentName=\"a\">{`typescript-json-validator`}</inlineCode></a>{`, made by `}<a parentName=\"p\" {...{\n        \"href\": \"https://twitter.com/ForbesLindesay\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`@ForbesLindesay`}</a>{`. The description of the repository is:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Automatically generate a validator using JSON Schema and AJV for any TypeScript type.`}</p>\n    </blockquote>\n    <p>{`For the test, lets re-use the `}<inlineCode parentName=\"p\">{`ExampleType`}</inlineCode>{` definition, which now has been moved to a separate file inside the `}<inlineCode parentName=\"p\">{`types`}</inlineCode>{` folder.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`// src/types/ExampleType.ts\n\ntype ExampleType = {\n  name: string;\n  age?: number;\n  pets: {\n    name: string;\n    legs: number;\n  }[];\n};\n`}</code></pre>\n    <p>{`This library exposes a handy CLI that can be called from anywhere, and given a file path and the name of the Type, it will generate in the same location as the file a new file with the Validator code.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`> npx typescript-json-validator src/types/ExampleType.ts ExampleType\n# ExampleType.validator.ts created!\n`}</code></pre>\n    <p>{`The resulting validator can be a very long file, so let’s take a look piece by piece:`}</p>\n    <h3 {...{\n      \"id\": \"1-creating-the-instance-of-ajv\"\n    }}>{`1. Creating the instance of `}<inlineCode parentName=\"h3\">{`ajv`}</inlineCode></h3>\n    <p>{`It also sets some default configuration for `}<inlineCode parentName=\"p\">{`ajv`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`/* tslint:disable */\n// generated by typescript-json-validator\nimport { inspect } from 'util';\nimport Ajv = require('ajv');\nimport ExampleType from './ExampleType';\n\nexport const ajv = new Ajv({\n  allErrors: true,\n  coerceTypes: false,\n  format: 'fast',\n  nullable: true,\n  unicode: true,\n  uniqueItems: true,\n  useDefaults: true,\n});\n\najv.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'));\n\nexport { ExampleType };\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"2-definition-of-the-schema-from-the-type\"\n    }}>{`2. Definition of the `}<inlineCode parentName=\"h3\">{`schema`}</inlineCode>{` from the Type`}</h3>\n    <p>{`This is the key of this approach.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`// Definition of Schema\nexport const ExampleTypeSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  defaultProperties: [],\n  properties: {\n    age: {\n      type: 'number',\n    },\n    name: {\n      type: 'string',\n    },\n    pets: {\n      items: {\n        defaultProperties: [],\n        properties: {\n          legs: {\n            type: 'number',\n          },\n          name: {\n            type: 'string',\n          },\n        },\n        required: ['legs', 'name'],\n        type: 'object',\n      },\n      type: 'array',\n    },\n  },\n  required: ['name', 'pets'],\n  type: 'object',\n};\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"3-export-validation-function-using-the-generated-schema\"\n    }}>{`3. Export validation function using the generated `}<inlineCode parentName=\"h3\">{`schema`}</inlineCode></h3>\n    <p>{`It takes care also of throwing an Exception in case there is an error.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`export type ValidateFunction<T> = ((data: unknown) => data is T) &\n  Pick<Ajv.ValidateFunction, 'errors'>;\nexport const isExampleType = ajv.compile(ExampleTypeSchema) as ValidateFunction<\n  ExampleType\n>;\n\nexport default function validate(value: unknown): ExampleType {\n  if (isExampleType(value)) {\n    return value;\n  } else {\n    throw new Error(\n      ajv.errorsText(\n        isExampleType.errors!.filter((e: any) => e.keyword !== 'if'),\n        { dataVar: 'ExampleType' },\n      ) +\n        '\\\\n\\\\n' +\n        inspect(value),\n    );\n  }\n}\n`}</code></pre>\n    <p>{`To use the validator, you just need to import from the respective path and call it. Be aware that this function is already checking if there were any errors inside the object, therefore it’s not needed to add an `}<inlineCode parentName=\"p\">{`if`}</inlineCode>{` statement here, making the code much cleaner.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`import validate from 'src/types/ExampleType.validator';\n\nconst getBiped = async () => {\n  const data = validate(await fetchData());\n\n  return data.pets.find((pet) => pet.legs === 2);\n};\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"typescript-️-ajv\"\n    }}>{`Typescript ❤️ Ajv`}</h3>\n    <p>{`This library uses `}<inlineCode parentName=\"p\">{`ajv`}</inlineCode>{` under the hood to create the Validator function, which means that you can make use of all nice features it provides, such as custom validation for types.`}</p>\n    <p>{`Let’s create a new definition type for `}<inlineCode parentName=\"p\">{`ExampleType`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`interface ExampleType {\n  /**\n   * @format email\n   */\n  email?: string;\n  /**\n   * @minimum 0\n   * @maximum 100\n   */\n  answer: number;\n}\n`}</code></pre>\n    <p>{`Above each property you find some annotations made inside comments bracket, these will be translated into `}<inlineCode parentName=\"p\">{`ajv`}</inlineCode>{` rules when the library generates the final Schema. This is the result:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`export const ExampleTypeSchema = {\n  $schema: 'http://json-schema.org/draft-07/schema#',\n  defaultProperties: [],\n  properties: {\n    answer: {\n      maximum: 100,\n      minimum: 0,\n      type: 'number',\n    },\n    email: {\n      format: 'email',\n      type: 'string',\n    },\n  },\n  required: ['answer'],\n  type: 'object',\n};\n`}</code></pre>\n    <p>{`The property `}<inlineCode parentName=\"p\">{`answer`}</inlineCode>{` presents now two more attributes that will check if the `}<inlineCode parentName=\"p\">{`number`}</inlineCode>{` is between 0 and 100. In the case of `}<inlineCode parentName=\"p\">{`email`}</inlineCode>{`, it will check if the `}<inlineCode parentName=\"p\">{`string`}</inlineCode>{` value belongs to a valid email address.`}</p>\n    <p>{`As these annotations are wrapped inside comments, they don’t present any conflict with the Typescript compiler.`}</p>\n    <h2 {...{\n      \"id\": \"making-it-part-of-your-workflow\"\n    }}>{`Making it part of your workflow`}</h2>\n    <p>{`This method is based on the idea that the developer will run the CLI command and generate the validators, otherwise, it exists the possibility that the schema was generated with an older version of the Type, and then it can present mismatches.`}</p>\n    <p>{`Fixing this issue is quite easy, you have to simply add a script that will be executed before your code will run. You can call it `}<inlineCode parentName=\"p\">{`prebuild`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`prestart`}</inlineCode>{`, and this is how your `}<inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` can look like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"scripts\": {\n    \"prebuild\": \"typescript-json-validator src/types/ExampleType.ts ExampleType\",\n    \"start\": \"yarn prebuild && ts-node start.ts\",\n    \"build\": \"yarn prebuild && tsc\"\n  }\n}\n`}</code></pre>\n    <p>{`One last recommendation, I recommend ignoring any `}<inlineCode parentName=\"p\">{`validator.ts`}</inlineCode>{` file from your project, because there is no point in committing these files to your repository as they are going to be generated every time you start your project.`}</p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"my-experience-with-this-approach-♂️\"\n    }}>{`My experience with this approach 🙋‍♂️`}</h2>\n    <p>{`About 2 months ago, I open-sourced one of my side projects called `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/EmaSuriano/gatsby-starter-linkedin-resume\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}><inlineCode parentName=\"a\">{`gatsby-starter-linkedin-resume`}</inlineCode></a>{`.`}</p>\n    <p>{`In summary, it’s a `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.gatsbyjs.org/docs/starters/\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`Gatsby Starter`}</a>{` that can retrieve your information from Linked In, using a `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/linkedtales/scrapedin\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`Linked In Crawler`}</a>{`, and generate an HTML and PDF resume from it, using `}<a parentName=\"p\" {...{\n        \"href\": \"https://jsonresume.org/\",\n        \"target\": \"_blank\",\n        \"rel\": \"noreferrer\"\n      }}>{`JSON Resume`}</a>{`.`}</p>\n    <p>{`The project presents two main flows:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Create the resume information: you will be asked to enter your Linked In credentials, then a crawler will open a new browser, read your profile values and finally save all this information inside a JSON file in your directory. After that, the project will transform the data extracted from the crawler into the structure for Json Resume.`}</li>\n      <li parentName=\"ol\">{`Build the project: once the resume information has been processed, Gatsby can generate HTML and PDF with it.`}</li>\n    </ol>\n    <p>{`At the beginning of this article, I mentioned that it’s advisable to validate your external sources. For this project they are:`}</p>\n    <ol>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Data coming from the Linked-in crawler`}</strong>{`: when dealing with crawlers you should always be very careful with their outcome because it’s highly attached to the website that they are getting the data from. In case there is a change on the website, the output from the crawler can be altered.`}</li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Local file with the resume information`}</strong>{`: this project allows you to change the content of your resume manually, in reality in case you want to you can skip the creation of the resume information and create it by yourself. If the structure of the resume data is wrong, JSON Resume won’t be able to generate the resume properly.`}</li>\n    </ol>\n    <p>{`These are the Type definition for each case:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`interface LinkedInSchema {\n  contact: ContactItem[];\n  profile: ProfileData;\n  positions: LinkedInPosition[];\n  educations: LinkedInEducation[];\n  skills: Skill[];\n  courses: Course[];\n  languages: LinkedInLanguage[];\n  projects: LinkedInProject[];\n}\n\ninterface JsonResumeSchema {\n  basics: JsonResumeBasics;\n  work: JsonResumeWork[];\n  volunteer?: JsonResumeVolunteer[];\n  education: JsonResumeEducation[];\n  awards?: JsonResumeAward[];\n  publications?: JsonResumePublication[];\n  skills?: JsonResumeSkill[];\n  languages?: JsonResumeLanguage[];\n  interests?: JsonResumeInterest[];\n  references?: JsonResumeReference[];\n  projects?: JsonResumeProject[];\n}\n`}</code></pre>\n    <p>{`Both Types present similarities in terms of variable names, but their internal structure differs. This is why it’s necessary to transform from one structure to the other on the first flow.`}</p>\n    <p>{`After I set up my project to generate the Validators from these types, checking the structure of the incoming object was a very easy task.`}</p>\n    <h2 {...{\n      \"id\": \"validation-of-the-crawler-result\"\n    }}>{`Validation of the Crawler result`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`// src/index.ts\nimport { RESUME_PATH, LINKED_IN_PATH } from './utils/path';\nimport validateLinkedInSchema from './types/LinkedInSchema.validator';\nimport { saveJson, readJson } from './utils/file';\nimport { inquireLoginData, getLinkedInData } from './utils/linkedin';\n\n// ❗️❗️ IMPORT OF THE VALIDATOR  ❗️❗️\nimport mapLinkedInToJSONResume from './utils/mapLinkedInToJSONResume';\n\nexport const main = async ({ renew }) => {\n  if (renew || !readJson(LINKED_IN_PATH)) {\n    const credentials = await inquireLoginData();\n    const linkedInData = await getLinkedInData(credentials);\n\n    saveJson(LINKED_IN_PATH, linkedInData);\n  }\n\n  // ❗️❗️ VALIDATION IN ACTION ❗️❗️\n  const linkedInParsed = validateLinkedInSchema(readJson(LINKED_IN_PATH));\n\n  const jsonResumeData = mapLinkedInToJSONResume(linkedInParsed);\n  saveJson(RESUME_PATH, jsonResumeData);\n};\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"validation-of-the-resume-information\"\n    }}>{`Validation of the Resume Information`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`// gatsby-config.js\nconst { existsSync } = require('fs');\n\n// ❗️❗️ IMPORT OF THE VALIDATOR  ❗️❗️\nconst {\n  default: validateJsonResume,\n} = require('./lib/types/JsonResumeSchema.validator');\n\nif (!existsSync('./resume.json')) {\n  throw new Error(\n    'Please run \"yarn generate-resume\" to generate your resume information.',\n  );\n}\n\n// ❗️❗️ VALIDATION IN ACTION ❗️❗️\nconst resumeJson = validateJsonResume(require('./resume.json'));\n\nmodule.exports = {\n  plugins: [\n    {\n      resolve: 'gatsby-theme-jsonresume',\n      options: {\n        resumeJson,\n      },\n    },\n    'gatsby-plugin-meta-redirect',\n  ],\n};\n`}</code></pre>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"closing-words-\"\n    }}>{`Closing Words 🗣`}</h2>\n    <p>{`To sump up, I created this table comparing the three methods, in which the Dynamic Types approach shows that it grabs the best of the other methods, making it the recommended approach to validate your object.`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Approach`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Manual`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Library`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Dynamic Types`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No additional Syntax`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`✅`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`❌`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`✅`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Validators and Types Sync`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`❌`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`❓`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`✅`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Standardization`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`❌`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`✅`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`✅`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`In case you are working in a Typescript codebase, I recommend you to give a try to this new of validating your object. It’s very easy to make the set up for it, and in case you don’t find it useful removing from the codebase is as easy as removing an `}<inlineCode parentName=\"p\">{`import`}</inlineCode>{` from your files.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}