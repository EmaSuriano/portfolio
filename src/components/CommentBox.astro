---
---

<section id="comments" class="-ml-6"></section>

<script>
  import { getTheme } from 'scripts/theme';

  function loadComment() {
    const s = document.createElement('script');
    s.src = 'https://utteranc.es/client.js';
    s.setAttribute('repo', 'EmaSuriano/portfolio');
    s.setAttribute('issue-term', 'pathname');
    s.setAttribute('theme', `github-${getTheme()}`);
    s.setAttribute('crossorigin', 'anonymous');
    s.setAttribute('async', '');

    const elem = document.getElementById('comments')!;
    elem.innerHTML = '';
    elem.appendChild(s);
  }

  loadComment();

  if (window.matchMedia) {
    window
      .matchMedia('(prefers-color-scheme: dark)')
      .addEventListener('change', loadComment);
  }

  window.addEventListener('theme-changed', loadComment);
</script>
