---
title: Making build fast by decoupling static sites
author: Ema Suriano
date: 123123
hero: ./images/hero.jpg
excerpt: TO FILL
secret: true
---

With the quick adoption of static website we saw a huge improvement in terms of performance of website, accessibility, a simple FTP server can host your application, network usage and many more great advantages.

At the same time, this approach gave us a huge problem --> Time to build.

The reason of this relays on the nature of the arquitechture of static website. Conceptually a static website should provide to the clients the pages they request in a plain format (`.html`), with no Javascript involved (this is the main reason of why they are so fast!).

But, what happened when you are working in a medium/large size application? Well the `build` step needs to generate all the possible pages he client can visit.

One point to remark here, ideally you can have a hibrid application: some combination of pages are statically generated and others have a "template" and inside they request the data. This approach works but the you loose the benefits I remarked at the beggining of the article.

## Real case

DISCLAIMER: I personally like to use Gatsby to build my static because of the great community around it and all the plugins/theme that I can re-use in my applications. Nevertheless this process can be done with **any** static website generator.

Let's build a portfolio of a developer. In this one a developer can:

- Have a home page where he shows who he/she is, an about section
- Have a personal blog to list all the articles.
- Have a section with talks he/she gave.

And the list can continue with more and more features, such as have a section to show his/her CV ...

### Starting with the home

Set up a quick gatsby project with a basic home screen to display some silly information using a Markdown to store your information.

And host in the url of `/`.

Run build, check how fast this is and serve.

### Add the personal blog

Use any gatbsy-theme to set up a blog, add some other blogs to the page with images using `mdx`.

Add the prefix of `/blog` to list all the articles, and generate the rest in `/blog/**`.

Add one article as a test, check the time of build increased and serve it. It's still quite fast!

Now add more articles with heavy content such as images, snippets, etc.

Check the build time that now it increased quite a lot!

### Adding the talks section

Add some demo talks. Use any gatsby-theme to add the mdx support for talks. I think we can use `mdx-deck` here.

Add the prefix to host it inside `/talks` and generate the rest of the talks.

Check the build time and now we can see that it was a lot!

## Highlighting the problem

The more features (screens) we add to our application, the slower the build step get.

Having a build time of 1 or 2 minutes it's not a serious thing at all. But spending 20 minutes building your application is!

And the main reason is money. For static website, they don't charge to **host** your website, they charge given the amount of build minutes you spend. Therefore the more time you spend building, the more you/your company have to pay.

## How to solve this issue?

So as always in Software Engineering, when we have complex problems we have to separate them!

> Divide and conquer!

And given our arquitechture we can easily do it!

If you take a deeper look at how the application is designed, one special characteristic is that every "feature" we created has a unique url.

Therefore we can treat our features as microservices! And split the monolith project into smaller ones, that just focus on delivering the feature.

Every feature will be totally dependable from the others, therefore they can be deployed individually. This is the key to reduce the build time!

**Before** 2 minutes building:

- Home page: 0.5 min
- Blog: 1 min
- Talks: 0.5 min

The problem here is that if I add a new article to my website I will also build Talks, when it's not needed at all ... By avoiding building when it's not needed, you will save quite a lot of time ðŸ†—

## How to do it?

Move "feature logic" to individual gatsby projects. Deploy them in the specific path.

## Related links
